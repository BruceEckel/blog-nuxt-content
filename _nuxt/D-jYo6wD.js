import lt from"./DjcnlKtK.js";import{_ as rt}from"./DOHEVeNQ.js";import it from"./CBsOQKtA.js";import ct from"./Dqq5GIzr.js";import{_ as dt,a as ut}from"./B1Cdqw2u.js";import{d as R,r as D,p as F,z as tt,o as et,c as l,e as u,A as z,B as S,b as mt,C as s,D as y,w as m,f as t,F as O,E as j,G as W,n as X,t as _,S as I,h as $,i as b,T as Y,g as Z,y as pt}from"./BqOOcIh4.js";import{_ as gt}from"./Bjd2I5hZ.js";import{f as ft,c as vt,g as ht,a as N}from"./CRX6OFYq.js";import{u as P}from"./Bi8nHLSp.js";import{q as V}from"./NcWABC2i.js";import{_ as _t}from"./DlAUqK2U.js";import{u as yt}from"./D1Wk8GCn.js";import"./DrJ-SGH0.js";import"./C-v3KzvZ.js";import"./CxYJgpPD.js";import"./Cj3MMxOi.js";import"./BHVzt7CL.js";import"./CadV9_3T.js";const bt=R({__name:"Comments",setup(p){const o=D(),c=F();tt(c,(n,i)=>{g(n.path)}),et(()=>{g(c.path)});function g(n){const i=document.createElement("script");i.setAttribute("src","https://utteranc.es/client.js"),i.setAttribute("repo","codybontecou/blog-nuxt-content"),i.setAttribute("issue-term",n),i.setAttribute("label","Comments"),i.setAttribute("theme","github-light"),i.setAttribute("crossorigin","anonymous"),i.setAttribute("async","true"),o.value.innerHTML="",o.value.appendChild(i)}return(n,i)=>(l(),u("section",{ref_key:"comments",ref:o},null,512))}});function xt(p){for(let o=p.length-1;o>0;o--){const c=Math.floor(Math.random()*(o+1));[p[o],p[c]]=[p[c],p[o]]}return p}const wt={class:"relative"},kt={key:0,class:"hidden lg:block fixed right-8 top-32 w-64 max-h-[calc(100vh-200px)] overflow-y-auto"},$t={class:"toc"},Ct={class:"space-y-3"},At=["href","onClick"],Tt={key:0,class:"lg:hidden fixed bottom-0 inset-x-0 z-40 bg-white rounded-t-xl shadow-lg max-h-[75vh] overflow-y-auto"},Bt={class:"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between"},Dt={class:"p-4"},Et={class:"space-y-4"},Mt=["href","onClick"],Lt={class:"flex flex-col justify-center max-w-3xl mx-auto"},St={class:"prose lg:prose-lg"},It={class:"text-4xl font-normal mb-4"},Ot={class:"text-gray-600 text-lg flex mb-10"},jt={class:"ml-2 flex list-none not-prose gap-x-2"},Nt={class:"mb-6"},zt=R({__name:"BlogPost",async setup(p){var U;let o,c;const{path:g}=F(),{data:n}=([o,c]=z(()=>P(`post-${g}`,()=>V(g).findOne())),o=await o,c(),o),i=(U=n.value)==null?void 0:U.topics,{data:T}=([o,c]=z(()=>P("allArticles",()=>V("/").sort({date:-1}).where({draft:{$ne:!0},ignore:{$ne:!0}}).find())),o=await o,c(),o),f=S(()=>{var a;return(a=T.value)==null?void 0:a.filter(e=>{var w;if(e.title===((w=n.value)==null?void 0:w.title))return!1;const d=e.topics||[],A=i||[];return d.length>0&&A.length>0&&d.some(k=>A.includes(k))}).slice(0,5)}),C=S(()=>{var w;if(f.value.length===5)return f.value;const e=5-f.value.length,d=(w=T.value)==null?void 0:w.filter(k=>!f.value.map(B=>B.title).includes(k.title)),A=xt(d).slice(0,e).sort((k,B)=>new Date(B.date)-new Date(k.date));return f.value.concat(A)}),E=S(()=>{var a;return ht((a=n.value)==null?void 0:a.body)}),v=D(!1),h=D(""),M=D(null),q=D([]),x=S(()=>{var a,e,d;return(d=(e=(a=n.value)==null?void 0:a.body)==null?void 0:e.toc)!=null&&d.links?n.value.body.toc.links:[]});et(()=>{q.value=x.value.map(a=>a.id),M.value=new IntersectionObserver(a=>{a.forEach(e=>{e.isIntersecting&&(h.value=e.target.id)})},{rootMargin:"-10% 0% -85% 0%",threshold:0}),q.value.forEach(a=>{var d;const e=document.getElementById(a);e&&((d=M.value)==null||d.observe(e))})}),mt(()=>{M.value&&M.value.disconnect()});const H=a=>{const e=document.getElementById(a);e&&(e.scrollIntoView({behavior:"smooth"}),v.value=!1)};return tt(v,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),(a,e)=>{const d=lt,A=rt,w=it,k=ct,B=dt,st=bt,ot=ut,at=gt;return l(),u("div",wt,[s(x).length?(l(),u("aside",kt,[(l(),y(I,null,{default:m(()=>[t("nav",$t,[e[3]||(e[3]=t("h2",{class:"font-medium mb-4"},"On this page",-1)),t("ul",Ct,[(l(!0),u(O,null,j(s(x),r=>(l(),u("li",{key:r.id,class:"text-sm"},[t("a",{href:`#${r.id}`,onClick:W(L=>H(r.id),["prevent"]),class:X({"text-primary hover:text-primary-dark transition-colors duration-200":!0,"text-indigo-600 font-medium":s(h)===r.id,"text-gray-600 hover:text-gray-900":s(h)!==r.id})},_(r.text),11,At)]))),128))])])]),fallback:m(()=>e[4]||(e[4]=[t("div",{class:"animate-pulse"},[t("div",{class:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"space-y-3"},[t("div",{class:"h-4 bg-gray-200 rounded w-5/6"}),t("div",{class:"h-4 bg-gray-200 rounded w-4/6"}),t("div",{class:"h-4 bg-gray-200 rounded w-3/6"})])],-1)])),_:1}))])):$("",!0),s(x).length?(l(),u("button",{key:1,onClick:e[0]||(e[0]=r=>v.value=!0),class:"lg:hidden flex items-center justify-center fixed right-4 bottom-4 z-20 rounded-full p-3 bg-white shadow transition-colors duration-200","aria-label":"Open table of contents"},[b(d,{name:"material-symbols:menu-book-outline",class:"w-6 h-6"})])):$("",!0),s(x).length?(l(),y(Y,{key:2,"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:m(()=>[s(v)?(l(),u("div",{key:0,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:e[1]||(e[1]=r=>v.value=!1)})):$("",!0)]),_:1})):$("",!0),s(x).length?(l(),y(Y,{key:3,"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0","leave-to-class":"translate-y-full"},{default:m(()=>[s(v)?(l(),u("div",Tt,[t("div",Bt,[e[5]||(e[5]=t("h2",{class:"font-medium"},"On this page",-1)),t("button",{onClick:e[2]||(e[2]=r=>v.value=!1),class:"p-1 hover:bg-gray-100 rounded-lg transition-colors duration-200","aria-label":"Close table of contents"},[b(d,{name:"material-symbols:close",class:"w-6 h-6"})])]),t("nav",Dt,[(l(),y(I,null,{default:m(()=>[t("ul",Et,[(l(!0),u(O,null,j(s(x),r=>(l(),u("li",{key:r.id},[t("a",{href:`#${r.id}`,onClick:W(L=>H(r.id),["prevent"]),class:X(["block py-2 px-3 rounded-lg transition-colors duration-200",{"bg-gray-100 font-semibold":s(h)===r.id,"hover:bg-gray-100":s(h)!==r.id}])},_(r.text),11,Mt)]))),128))])]),fallback:m(()=>e[6]||(e[6]=[t("div",{class:"animate-pulse space-y-4"},[t("div",{class:"h-10 bg-gray-200 rounded-lg"}),t("div",{class:"h-10 bg-gray-200 rounded-lg"}),t("div",{class:"h-10 bg-gray-200 rounded-lg"})],-1)])),_:1}))])])):$("",!0)]),_:1})):$("",!0),(l(),y(I,null,{default:m(()=>[t("main",Lt,[b(k,null,{default:m(({doc:r})=>{var L,G,J;return[t("article",St,[t("h1",It,_((L=s(n))==null?void 0:L.title),1),t("div",Ot,[Z(_(s(ft)((G=s(n))==null?void 0:G.date))+" · "+_(s(vt)(s(E)))+" "+_(a.$t("latest.minuteRead"))+" · ",1),(l(!0),u(O,null,j((J=s(n))==null?void 0:J.topics,(K,nt)=>(l(),y(A,{class:"ml-1 text-gray-600",to:"topics/"+K},{default:m(()=>{var Q;return[Z(_(`${K}${nt!==((Q=s(n))==null?void 0:Q.topics.length)-1?",":""}`),1)]}),_:2},1032,["to"]))),256)),t("ul",jt,[(l(),u("li",{class:"not-prose underline hover:opacity-75 break-keep whitespace-nowrap",key:a.topic}))])]),b(w,{value:s(n)},null,8,["value"])])]}),_:1}),b(B,{class:"mt-10 lg:w-2/3"}),b(st,{class:"mt-10"}),b(ot,{class:"my-20"}),t("div",null,[t("h2",Nt,_(a.$t("slug.alsoEnjoy")),1),s(C)&&s(C).length?(l(),y(at,{key:0,articles:s(C)},null,8,["articles"])):$("",!0)])])]),fallback:m(()=>e[7]||(e[7]=[t("div",{class:"animate-pulse max-w-3xl mx-auto"},[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/4 mb-10"}),t("div",{class:"space-y-4"},[t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded w-5/6"})])],-1)])),_:1}))])}}}),Pt=_t(zt,[["__scopeId","data-v-fcddb7e2"]]),ae=R({__name:"[...slug]",async setup(p){var i,T,f,C,E;let o,c;const{path:g}=F(),{data:n}=([o,c]=z(()=>P(`post-${g}`,()=>V(g).findOne())),o=await o,c(),o);return yt({description:N((i=n.value)==null?void 0:i.body),ogTitle:(T=n.value)==null?void 0:T.title,ogDescription:N((f=n.value)==null?void 0:f.body),twitterTitle:(C=n.value)==null?void 0:C.title,twitterDescription:N((E=n.value)==null?void 0:E.body),twitterCard:"summary"}),pt({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/ico",href:"/favicon.ico"}]}),(v,h)=>(l(),y(I,null,{default:m(()=>[b(s(Pt))]),fallback:m(()=>h[0]||(h[0]=[t("div",{class:"animate-pulse"},[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/4 mb-10"}),t("div",{class:"space-y-4"},[t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded w-5/6"})])],-1)])),_:1}))}});export{ae as default};
