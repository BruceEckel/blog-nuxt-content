import{_ as ue}from"./ByUuOirQ.js";import de from"./A3CukdLT.js";import{_ as pe}from"./D9BaEDwj.js";import me from"./9kKZ9SWF.js";import fe from"./DRAAtRQn.js";import{z as M,A as L,B as _e,C as ge,D as he,d as D,c,e as _,E as F,n as N,G as r,H as U,r as R,I as H,J as ve,K as be,L as ye,M as xe,N as re,O as we,P as $e,Q as E,w as g,i as y,g as P,t as V,f as t,R as X,p as ee,o as ie,h as I,S as Ce,U as ke,V as Y,b as Te,F as W,W as K,X as G,T as le,y as Ve}from"./UqoH2ULh.js";import{_ as Ae,f as De,c as Se,g as Ee,a as Q}from"./BMrIo94J.js";import{u as J}from"./p7oIRHcI.js";import{_ as Ne,u as Oe}from"./DhASsSen.js";import{q as Z}from"./DSLq-j0s.js";import{_ as Ie}from"./DlAUqK2U.js";import"./wIxQ9wgd.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";import"./C5eMtl3J.js";import"./C-nnPvwK.js";function Ue(s,e,o){const[l={},n]=typeof e=="string"?[{},e]:[e,o],i=M(()=>L(s)),p=l.key||_e([n,typeof i.value=="string"?i.value:"",...Be(l)]);if(!p||typeof p!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+p);const f=p===n?"$f"+p:p;if(!l.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:k,lazy:S,default:b,transform:x,pick:$,watch:h,immediate:w,getCachedData:A,deep:B,dedupe:u,...a}=l,d=ge({...he,...a,cache:typeof l.cache=="boolean"?void 0:l.cache}),T={server:k,lazy:S,default:b,transform:x,pick:$,immediate:w,getCachedData:A,deep:B,dedupe:u,watch:h===!1?[]:[d,i,...h||[]]};let m;return J(f,()=>{var q;(q=m==null?void 0:m.abort)==null||q.call(m,"Request aborted as another request to the same endpoint was initiated."),m=typeof AbortController<"u"?new AbortController:{};const O=L(l.timeout);let j;return O&&(j=setTimeout(()=>m.abort("Request aborted due to timeout."),O),m.signal.onabort=()=>clearTimeout(j)),(l.$fetch||globalThis.$fetch)(i.value,{signal:m.signal,...d}).finally(()=>{clearTimeout(j)})},T)}function Be(s){var o;const e=[((o=L(s.method))==null?void 0:o.toUpperCase())||"GET",L(s.baseURL)];for(const l of[s.params||s.query]){const n=L(l);if(!n)continue;const i={};for(const[p,f]of Object.entries(n))i[L(p)]=L(f);e.push(i)}return e}const Le=D({__name:"Card",props:{class:{}},setup(s){const e=s;return(o,l)=>(c(),_("div",{class:N(r(U)("rounded-lg bg-card text-card-foreground shadow-sm",e.class))},[F(o.$slots,"default")],2))}}),Me=D({__name:"CardContent",props:{class:{}},setup(s){const e=s;return(o,l)=>(c(),_("div",{class:N(r(U)("p-6 pt-0",e.class))},[F(o.$slots,"default")],2))}}),Re=D({__name:"CardDescription",props:{class:{}},setup(s){const e=s;return(o,l)=>(c(),_("p",{class:N(r(U)("text-sm text-muted-foreground",e.class))},[F(o.$slots,"default")],2))}}),je=D({__name:"CardHeader",props:{class:{}},setup(s){const e=s;return(o,l)=>(c(),_("div",{class:N(r(U)("flex flex-col gap-y-1.5 p-6",e.class))},[F(o.$slots,"default")],2))}}),Pe=D({__name:"CardTitle",props:{class:{}},setup(s){const e=s;return(o,l)=>(c(),_("h3",{class:N(r(U)("text-2xl font-semibold leading-none tracking-tight",e.class))},[F(o.$slots,"default")],2))}});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Fe=s=>typeof s<"u";function qe(s){return JSON.parse(JSON.stringify(s))}function ze(s,e,o,l={}){var n,i,p;const{clone:f=!1,passive:k=!1,eventName:S,deep:b=!1,defaultValue:x,shouldEmit:$}=l,h=be(),w=o||(h==null?void 0:h.emit)||((n=h==null?void 0:h.$emit)==null?void 0:n.bind(h))||((p=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:p.bind(h==null?void 0:h.proxy));let A=S;A=A||`update:${e.toString()}`;const B=d=>f?typeof f=="function"?f(d):qe(d):d,u=()=>Fe(s[e])?B(s[e]):x,a=d=>{$?$(d)&&w(A,d):w(A,d)};if(k){const d=u(),T=R(d);let m=!1;return H(()=>s[e],C=>{m||(m=!0,T.value=B(C),ve(()=>m=!1))}),H(T,C=>{!m&&(C!==s[e]||b)&&a(C)},{deep:b}),T}else return M({get(){return u()},set(d){a(d)}})}const Ge=D({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(s,{emit:e}){const o=s,n=ze(o,"modelValue",e,{passive:!0,defaultValue:o.defaultValue});return(i,p)=>ye((c(),_("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>re(n)?n.value=f:null),class:N(r(U)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o.class))},null,2)),[[xe,r(n)]])}}),He=()=>({subscribeUserToNewsletter:async e=>await Ue("/api/subscribeUser",{method:"POST",body:{email:e}},"$VLVQMPwieG")}),Je={class:"flex flex-col gap-2"},We={class:"flex space-x-1.5"},Ke=D({__name:"Newsletter",setup(s){const{toast:e}=we(),{t:o}=$e(),l=R(""),{subscribeUserToNewsletter:n}=He(),i=async()=>{const{error:p}=await n(l.value);l.value="",p.length?e({title:o("newsletter.signupError"),description:o("newsletter.signupErrorDescription")}):e({title:o("newsletter.successTitle"),description:o("newsletter.successDescription")})};return(p,f)=>{const k=Pe,S=Re,b=je,x=Ge,$=Ae,h=Me,w=Le;return c(),E(w,null,{default:g(()=>[y(b,null,{default:g(()=>[y(k,null,{default:g(()=>[P(V(p.$t("newsletter.cardTitle")),1)]),_:1}),y(S,null,{default:g(()=>[P(V(p.$t("newsletter.cardDescription")),1)]),_:1})]),_:1}),y(h,null,{default:g(()=>[t("form",{onSubmit:X(i,["prevent"])},[t("div",Je,[t("div",We,[y(x,{name:"emailInput",modelValue:r(l),"onUpdate:modelValue":f[0]||(f[0]=A=>re(l)?l.value=A:null),type:"email",placeholder:"Enter your email"},null,8,["modelValue"]),y($,{class:"self-end",type:"submit"},{default:g(()=>[P(V(p.$t("newsletter.submit")),1)]),_:1})])])],32)]),_:1})]),_:1})}}}),Qe=D({__name:"Comments",setup(s){const e=R(),o=ee();H(o,(n,i)=>{l(n.path)}),ie(()=>{l(o.path)});function l(n){const i=document.createElement("script");i.setAttribute("src","https://utteranc.es/client.js"),i.setAttribute("repo","codybontecou/blog-nuxt-content"),i.setAttribute("issue-term",n),i.setAttribute("label","Comments"),i.setAttribute("theme","github-light"),i.setAttribute("crossorigin","anonymous"),i.setAttribute("async","true"),e.value.innerHTML="",e.value.appendChild(i)}return(n,i)=>(c(),_("section",{ref_key:"comments",ref:e},null,512))}}),Xe=D({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{},label:{}},setup(s){const e=s,o=M(()=>{const{class:l,...n}=e;return n});return(l,n)=>(c(),E(r(ke),Ce(o.value,{class:r(U)("shrink-0 bg-border relative",e.orientation==="vertical"?"w-px h-full":"h-px w-full",e.class)}),{default:g(()=>[e.label?(c(),_("span",{key:0,class:N(r(U)("text-xs text-muted-foreground bg-background absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex justify-center items-center",e.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] py-1 px-2"))},V(e.label),3)):I("",!0)]),_:1},16,["class"]))}});function Ye(s){for(let e=s.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[s[e],s[o]]=[s[o],s[e]]}return s}const Ze={class:"relative"},et={key:0,class:"hidden lg:block fixed right-8 top-32 w-64 max-h-[calc(100vh-200px)] overflow-y-auto"},tt={class:"toc"},st={class:"space-y-3"},ot=["href","onClick"],nt={key:0,class:"lg:hidden fixed bottom-0 inset-x-0 z-40 bg-white rounded-t-xl shadow-lg max-h-[75vh] overflow-y-auto"},at={class:"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between"},lt={class:"p-4"},rt={class:"space-y-4"},it=["href","onClick"],ct={class:"flex flex-col justify-center max-w-3xl mx-auto"},ut={class:"prose lg:prose-lg"},dt={class:"text-4xl font-normal mb-4"},pt={class:"text-gray-600 text-lg flex mb-10"},mt={class:"ml-2 flex list-none not-prose gap-x-2"},ft={class:"mb-6"},_t=D({__name:"BlogPost",async setup(s){var B;let e,o;const{path:l}=ee(),{data:n}=([e,o]=Y(()=>J(`post-${l}`,()=>Z(l).findOne())),e=await e,o(),e),i=(B=n.value)==null?void 0:B.topics,{data:p}=([e,o]=Y(()=>J("allArticles",()=>Z("/").sort({date:-1}).where({draft:{$ne:!0},ignore:{$ne:!0}}).find())),e=await e,o(),e),f=M(()=>{var u;return(u=p.value)==null?void 0:u.filter(a=>{var m;if(a.title===((m=n.value)==null?void 0:m.title))return!1;const d=a.topics||[],T=i||[];return d.length>0&&T.length>0&&d.some(C=>T.includes(C))}).slice(0,5)}),k=M(()=>{var m;if(f.value.length===5)return f.value;const a=5-f.value.length,d=(m=p.value)==null?void 0:m.filter(C=>!f.value.map(O=>O.title).includes(C.title)),T=Ye(d).slice(0,a).sort((C,O)=>new Date(O.date)-new Date(C.date));return f.value.concat(T)}),S=M(()=>{var u;return Ee((u=n.value)==null?void 0:u.body)}),b=R(!1),x=R(""),$=R(null),h=R([]),w=M(()=>{var u,a,d;return(d=(a=(u=n.value)==null?void 0:u.body)==null?void 0:a.toc)!=null&&d.links?n.value.body.toc.links:[]});ie(()=>{h.value=w.value.map(u=>u.id),$.value=new IntersectionObserver(u=>{u.forEach(a=>{a.isIntersecting&&(x.value=a.target.id)})},{rootMargin:"-10% 0% -85% 0%",threshold:0}),h.value.forEach(u=>{var d;const a=document.getElementById(u);a&&((d=$.value)==null||d.observe(a))})}),Te(()=>{$.value&&$.value.disconnect()});const A=u=>{const a=document.getElementById(u);a&&(a.scrollIntoView({behavior:"smooth"}),b.value=!1)};return H(b,u=>{u?document.body.style.overflow="hidden":document.body.style.overflow=""}),(u,a)=>{const d=de,T=pe,m=me,C=fe,O=Ke,j=Qe,te=Xe,q=Ne;return c(),_("div",Ze,[r(w).length?(c(),_("aside",et,[(c(),E(G,null,{default:g(()=>[t("nav",tt,[a[3]||(a[3]=t("h2",{class:"font-medium mb-4"},"On this page",-1)),t("ul",st,[(c(!0),_(W,null,K(r(w),v=>(c(),_("li",{key:v.id,class:"text-sm"},[t("a",{href:`#${v.id}`,onClick:X(z=>A(v.id),["prevent"]),class:N({"text-primary hover:text-primary-dark transition-colors duration-200":!0,"text-indigo-600 font-medium":r(x)===v.id,"text-gray-600 hover:text-gray-900":r(x)!==v.id})},V(v.text),11,ot)]))),128))])])]),fallback:g(()=>a[4]||(a[4]=[t("div",{class:"animate-pulse"},[t("div",{class:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"space-y-3"},[t("div",{class:"h-4 bg-gray-200 rounded w-5/6"}),t("div",{class:"h-4 bg-gray-200 rounded w-4/6"}),t("div",{class:"h-4 bg-gray-200 rounded w-3/6"})])],-1)])),_:1}))])):I("",!0),r(w).length?(c(),_("button",{key:1,onClick:a[0]||(a[0]=v=>b.value=!0),class:"lg:hidden flex items-center justify-center fixed right-4 bottom-4 z-20 rounded-full p-3 bg-white shadow transition-colors duration-200","aria-label":"Open table of contents"},[y(d,{name:"material-symbols:menu-book-outline",class:"w-6 h-6"})])):I("",!0),r(w).length?(c(),E(le,{key:2,"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:g(()=>[r(b)?(c(),_("div",{key:0,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:a[1]||(a[1]=v=>b.value=!1)})):I("",!0)]),_:1})):I("",!0),r(w).length?(c(),E(le,{key:3,"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0","leave-to-class":"translate-y-full"},{default:g(()=>[r(b)?(c(),_("div",nt,[t("div",at,[a[5]||(a[5]=t("h2",{class:"font-medium"},"On this page",-1)),t("button",{onClick:a[2]||(a[2]=v=>b.value=!1),class:"p-1 hover:bg-gray-100 rounded-lg transition-colors duration-200","aria-label":"Close table of contents"},[y(d,{name:"material-symbols:close",class:"w-6 h-6"})])]),t("nav",lt,[(c(),E(G,null,{default:g(()=>[t("ul",rt,[(c(!0),_(W,null,K(r(w),v=>(c(),_("li",{key:v.id},[t("a",{href:`#${v.id}`,onClick:X(z=>A(v.id),["prevent"]),class:N(["block py-2 px-3 rounded-lg transition-colors duration-200",{"bg-gray-100 font-semibold":r(x)===v.id,"hover:bg-gray-100":r(x)!==v.id}])},V(v.text),11,it)]))),128))])]),fallback:g(()=>a[6]||(a[6]=[t("div",{class:"animate-pulse space-y-4"},[t("div",{class:"h-10 bg-gray-200 rounded-lg"}),t("div",{class:"h-10 bg-gray-200 rounded-lg"}),t("div",{class:"h-10 bg-gray-200 rounded-lg"})],-1)])),_:1}))])])):I("",!0)]),_:1})):I("",!0),(c(),E(G,null,{default:g(()=>[t("main",ct,[y(C,null,{default:g(({doc:v})=>{var z,se,oe;return[t("article",ut,[t("h1",dt,V((z=r(n))==null?void 0:z.title),1),t("div",pt,[P(V(r(De)((se=r(n))==null?void 0:se.date))+" · "+V(r(Se)(r(S)))+" "+V(u.$t("latest.minuteRead"))+" · ",1),(c(!0),_(W,null,K((oe=r(n))==null?void 0:oe.topics,(ne,ce)=>(c(),E(T,{class:"ml-1 text-gray-600",to:"topics/"+ne},{default:g(()=>{var ae;return[P(V(`${ne}${ce!==((ae=r(n))==null?void 0:ae.topics.length)-1?",":""}`),1)]}),_:2},1032,["to"]))),256)),t("ul",mt,[(c(),_("li",{class:"not-prose underline hover:opacity-75 break-keep whitespace-nowrap",key:u.topic}))])]),y(m,{value:r(n)},null,8,["value"])])]}),_:1}),y(O,{class:"mt-10 lg:w-2/3"}),y(j,{class:"mt-10"}),y(te,{class:"my-20"}),t("div",null,[t("h2",ft,V(u.$t("slug.alsoEnjoy")),1),r(k)&&r(k).length?(c(),E(q,{key:0,articles:r(k)},null,8,["articles"])):I("",!0)])])]),fallback:g(()=>a[7]||(a[7]=[t("div",{class:"animate-pulse max-w-3xl mx-auto"},[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/4 mb-10"}),t("div",{class:"space-y-4"},[t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded w-5/6"})])],-1)])),_:1}))])}}}),gt=Ie(_t,[["__scopeId","data-v-fcddb7e2"]]),ht={class:"max-w-3xl mx-0 md:mx-auto py-8 px-4"},It=D({__name:"[...slug]",async setup(s){var i,p,f,k,S;let e,o;const{path:l}=ee(),{data:n}=([e,o]=Y(()=>J(`post-${l}`,()=>Z(l).findOne())),e=await e,o(),e);return Oe({description:Q((i=n.value)==null?void 0:i.body),ogTitle:(p=n.value)==null?void 0:p.title,ogDescription:Q((f=n.value)==null?void 0:f.body),twitterTitle:(k=n.value)==null?void 0:k.title,twitterDescription:Q((S=n.value)==null?void 0:S.body),twitterCard:"summary"}),Ve({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/ico",href:"/favicon.ico"}]}),(b,x)=>{const $=ue;return c(),_("div",ht,[y($),(c(),E(G,null,{default:g(()=>[y(r(gt))]),fallback:g(()=>x[0]||(x[0]=[t("div",{class:"animate-pulse"},[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/4 mb-10"}),t("div",{class:"space-y-4"},[t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded w-5/6"})])],-1)])),_:1}))])}}});export{It as default};
