import{_ as lt}from"./DkrtvCmY.js";import rt from"./CrEJozZz.js";import{_ as it}from"./FDrGlfa6.js";import ct from"./kssDcvGn.js";import dt from"./BtsaoiPL.js";import{_ as ut,a as mt}from"./CS1rgHAm.js";import{d as R,r as E,p as F,z as tt,o as et,c as l,e as u,A as z,B as S,b as pt,C as s,D as b,w as m,f as t,F as N,E as O,G as W,n as X,t as y,S as I,h as $,i as g,T as Y,g as Z,y as gt}from"./BUBTNOcY.js";import{_ as ft}from"./wOlMbieB.js";import{f as _t,c as vt,g as ht,a as j}from"./CRX6OFYq.js";import{u as P}from"./DwGB7nIs.js";import{q as V}from"./Cpvh2X9e.js";import{_ as yt}from"./DlAUqK2U.js";import{u as bt}from"./lgiqcPWN.js";import"./BZnQP2rW.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";import"./Cgb2G_P7.js";import"./l8VNlR1Q.js";import"./jUg7NYje.js";const xt=R({__name:"Comments",setup(p){const o=E(),c=F();tt(c,(n,i)=>{f(n.path)}),et(()=>{f(c.path)});function f(n){const i=document.createElement("script");i.setAttribute("src","https://utteranc.es/client.js"),i.setAttribute("repo","codybontecou/blog-nuxt-content"),i.setAttribute("issue-term",n),i.setAttribute("label","Comments"),i.setAttribute("theme","github-light"),i.setAttribute("crossorigin","anonymous"),i.setAttribute("async","true"),o.value.innerHTML="",o.value.appendChild(i)}return(n,i)=>(l(),u("section",{ref_key:"comments",ref:o},null,512))}});function wt(p){for(let o=p.length-1;o>0;o--){const c=Math.floor(Math.random()*(o+1));[p[o],p[c]]=[p[c],p[o]]}return p}const kt={class:"relative"},$t={key:0,class:"hidden lg:block fixed right-8 top-32 w-64 max-h-[calc(100vh-200px)] overflow-y-auto"},Ct={class:"toc"},At={class:"space-y-3"},Tt=["href","onClick"],Bt={key:0,class:"lg:hidden fixed bottom-0 inset-x-0 z-40 bg-white rounded-t-xl shadow-lg max-h-[75vh] overflow-y-auto"},Dt={class:"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between"},Et={class:"p-4"},Mt={class:"space-y-4"},Lt=["href","onClick"],St={class:"flex flex-col justify-center max-w-3xl mx-auto"},It={class:"prose lg:prose-lg"},Nt={class:"text-4xl font-normal mb-4"},Ot={class:"text-gray-600 text-lg flex mb-10"},jt={class:"ml-2 flex list-none not-prose gap-x-2"},zt={class:"mb-6"},Pt=R({__name:"BlogPost",async setup(p){var U;let o,c;const{path:f}=F(),{data:n}=([o,c]=z(()=>P(`post-${f}`,()=>V(f).findOne())),o=await o,c(),o),i=(U=n.value)==null?void 0:U.topics,{data:B}=([o,c]=z(()=>P("allArticles",()=>V("/").sort({date:-1}).where({draft:{$ne:!0},ignore:{$ne:!0}}).find())),o=await o,c(),o),_=S(()=>{var a;return(a=B.value)==null?void 0:a.filter(e=>{var w;if(e.title===((w=n.value)==null?void 0:w.title))return!1;const d=e.topics||[],T=i||[];return d.length>0&&T.length>0&&d.some(k=>T.includes(k))}).slice(0,5)}),C=S(()=>{var w;if(_.value.length===5)return _.value;const e=5-_.value.length,d=(w=B.value)==null?void 0:w.filter(k=>!_.value.map(D=>D.title).includes(k.title)),T=wt(d).slice(0,e).sort((k,D)=>new Date(D.date)-new Date(k.date));return _.value.concat(T)}),M=S(()=>{var a;return ht((a=n.value)==null?void 0:a.body)}),v=E(!1),h=E(""),A=E(null),q=E([]),x=S(()=>{var a,e,d;return(d=(e=(a=n.value)==null?void 0:a.body)==null?void 0:e.toc)!=null&&d.links?n.value.body.toc.links:[]});et(()=>{q.value=x.value.map(a=>a.id),A.value=new IntersectionObserver(a=>{a.forEach(e=>{e.isIntersecting&&(h.value=e.target.id)})},{rootMargin:"-10% 0% -85% 0%",threshold:0}),q.value.forEach(a=>{var d;const e=document.getElementById(a);e&&((d=A.value)==null||d.observe(e))})}),pt(()=>{A.value&&A.value.disconnect()});const H=a=>{const e=document.getElementById(a);e&&(e.scrollIntoView({behavior:"smooth"}),v.value=!1)};return tt(v,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),(a,e)=>{const d=rt,T=it,w=ct,k=dt,D=ut,st=xt,ot=mt,at=ft;return l(),u("div",kt,[s(x).length?(l(),u("aside",$t,[(l(),b(I,null,{default:m(()=>[t("nav",Ct,[e[3]||(e[3]=t("h2",{class:"font-medium mb-4"},"On this page",-1)),t("ul",At,[(l(!0),u(N,null,O(s(x),r=>(l(),u("li",{key:r.id,class:"text-sm"},[t("a",{href:`#${r.id}`,onClick:W(L=>H(r.id),["prevent"]),class:X({"text-primary hover:text-primary-dark transition-colors duration-200":!0,"text-indigo-600 font-medium":s(h)===r.id,"text-gray-600 hover:text-gray-900":s(h)!==r.id})},y(r.text),11,Tt)]))),128))])])]),fallback:m(()=>e[4]||(e[4]=[t("div",{class:"animate-pulse"},[t("div",{class:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"space-y-3"},[t("div",{class:"h-4 bg-gray-200 rounded w-5/6"}),t("div",{class:"h-4 bg-gray-200 rounded w-4/6"}),t("div",{class:"h-4 bg-gray-200 rounded w-3/6"})])],-1)])),_:1}))])):$("",!0),s(x).length?(l(),u("button",{key:1,onClick:e[0]||(e[0]=r=>v.value=!0),class:"lg:hidden flex items-center justify-center fixed right-4 bottom-4 z-20 rounded-full p-3 bg-white shadow transition-colors duration-200","aria-label":"Open table of contents"},[g(d,{name:"material-symbols:menu-book-outline",class:"w-6 h-6"})])):$("",!0),s(x).length?(l(),b(Y,{key:2,"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:m(()=>[s(v)?(l(),u("div",{key:0,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:e[1]||(e[1]=r=>v.value=!1)})):$("",!0)]),_:1})):$("",!0),s(x).length?(l(),b(Y,{key:3,"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-y-0","leave-to-class":"translate-y-full"},{default:m(()=>[s(v)?(l(),u("div",Bt,[t("div",Dt,[e[5]||(e[5]=t("h2",{class:"font-medium"},"On this page",-1)),t("button",{onClick:e[2]||(e[2]=r=>v.value=!1),class:"p-1 hover:bg-gray-100 rounded-lg transition-colors duration-200","aria-label":"Close table of contents"},[g(d,{name:"material-symbols:close",class:"w-6 h-6"})])]),t("nav",Et,[(l(),b(I,null,{default:m(()=>[t("ul",Mt,[(l(!0),u(N,null,O(s(x),r=>(l(),u("li",{key:r.id},[t("a",{href:`#${r.id}`,onClick:W(L=>H(r.id),["prevent"]),class:X(["block py-2 px-3 rounded-lg transition-colors duration-200",{"bg-gray-100 font-semibold":s(h)===r.id,"hover:bg-gray-100":s(h)!==r.id}])},y(r.text),11,Lt)]))),128))])]),fallback:m(()=>e[6]||(e[6]=[t("div",{class:"animate-pulse space-y-4"},[t("div",{class:"h-10 bg-gray-200 rounded-lg"}),t("div",{class:"h-10 bg-gray-200 rounded-lg"}),t("div",{class:"h-10 bg-gray-200 rounded-lg"})],-1)])),_:1}))])])):$("",!0)]),_:1})):$("",!0),(l(),b(I,null,{default:m(()=>[t("main",St,[g(k,null,{default:m(({doc:r})=>{var L,G,J;return[t("article",It,[t("h1",Nt,y((L=s(n))==null?void 0:L.title),1),t("div",Ot,[Z(y(s(_t)((G=s(n))==null?void 0:G.date))+" · "+y(s(vt)(s(M)))+" "+y(a.$t("latest.minuteRead"))+" · ",1),(l(!0),u(N,null,O((J=s(n))==null?void 0:J.topics,(K,nt)=>(l(),b(T,{class:"ml-1 text-gray-600",to:"topics/"+K},{default:m(()=>{var Q;return[Z(y(`${K}${nt!==((Q=s(n))==null?void 0:Q.topics.length)-1?",":""}`),1)]}),_:2},1032,["to"]))),256)),t("ul",jt,[(l(),u("li",{class:"not-prose underline hover:opacity-75 break-keep whitespace-nowrap",key:a.topic}))])]),g(w,{value:s(n)},null,8,["value"])])]}),_:1}),g(D,{class:"mt-10 lg:w-2/3"}),g(st,{class:"mt-10"}),g(ot,{class:"my-20"}),t("div",null,[t("h2",zt,y(a.$t("slug.alsoEnjoy")),1),s(C)&&s(C).length?(l(),b(at,{key:0,articles:s(C)},null,8,["articles"])):$("",!0)])])]),fallback:m(()=>e[7]||(e[7]=[t("div",{class:"animate-pulse max-w-3xl mx-auto"},[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/4 mb-10"}),t("div",{class:"space-y-4"},[t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded w-5/6"})])],-1)])),_:1}))])}}}),Vt=yt(Pt,[["__scopeId","data-v-fcddb7e2"]]),Rt={class:"max-w-3xl mx-0 md:mx-auto py-8 px-4"},Ft={class:"max-w-lg mx-auto mb-16 lg:max-w-3xl"},ie=R({__name:"[...slug]",async setup(p){var i,B,_,C,M;let o,c;const{path:f}=F(),{data:n}=([o,c]=z(()=>P(`post-${f}`,()=>V(f).findOne())),o=await o,c(),o);return bt({description:j((i=n.value)==null?void 0:i.body),ogTitle:(B=n.value)==null?void 0:B.title,ogDescription:j((_=n.value)==null?void 0:_.body),twitterTitle:(C=n.value)==null?void 0:C.title,twitterDescription:j((M=n.value)==null?void 0:M.body),twitterCard:"summary"}),gt({htmlAttrs:{lang:"en"},link:[{rel:"icon",type:"image/ico",href:"/favicon.ico"}]}),(v,h)=>{const A=lt;return l(),u("div",Rt,[t("div",Ft,[g(A),(l(),b(I,null,{default:m(()=>[g(s(Vt))]),fallback:m(()=>h[0]||(h[0]=[t("div",{class:"animate-pulse"},[t("div",{class:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),t("div",{class:"h-4 bg-gray-200 rounded w-1/4 mb-10"}),t("div",{class:"space-y-4"},[t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded"}),t("div",{class:"h-4 bg-gray-200 rounded w-5/6"})])],-1)])),_:1}))])])}}});export{ie as default};
