[{"data":1,"prerenderedAt":1289},["ShallowReactive",2],{"post-/topics/python":3},[4,604],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":6,"title":8,"description":9,"type":10,"author":11,"date":14,"category":15,"dropdown":16,"topics":17,"meta":22,"canonicalUrl":38,"newsletter":7,"created_at":39,"last_modified":40,"body":41,"_type":598,"_id":599,"_source":600,"_file":601,"_stem":602,"_extension":603},"/generate-twitter-lists-with-python","",false,"Generating Twitter Lists with Python",null,"post",{"name":12,"image":13},"Cody Bontecou","https://codybontecou.com/images/cody-abstract.jpeg","2020-09-15T00:00:00.000Z","tutorials","Python",[18,19,20,21],"python","tweepy","twitter","automation",[23,25,28,31,33,35],{"name":24,"content":8},"og:title",{"name":26,"content":27},"og:description","Automatically generating a Twitter List of Paul Grahams feed with Python and Tweepy",{"name":29,"content":30},"og:image","https://codybontecou.com/images/generate-twitter-lists-with-python-meta.png",{"name":32,"content":27},"og:image:alt",{"name":34,"content":8},"twitter:title",{"name":36,"content":37},"twitter:text:title","Generating a Twitter List with Python","https://codybontecou.com/generate-twitter-lists-with-python.html","2024-10-31T14:26","2024-11-09T21:19",{"type":42,"children":43,"toc":587},"root",[44,65,77,100,105,118,125,133,138,143,149,164,169,174,239,245,261,318,329,335,355,364,369,375,380,409,421,430,436,440,459,472,493,502,508,512,523,536,541,553,562,568,582],{"type":45,"tag":46,"props":47,"children":48},"element","blockquote",{},[49],{"type":45,"tag":50,"props":51,"children":52},"p",{},[53,56],{"type":54,"value":55},"text","The finished project can be seen ",{"type":45,"tag":57,"props":58,"children":62},"a",{"href":59,"rel":60},"https://github.com/CodyBontecou/Generating-Twitter-Lists-with-Python/blob/main/tweepy_lists/app.py",[61],"nofollow",[63],{"type":54,"value":64},"here",{"type":45,"tag":50,"props":66,"children":67},{},[68,75],{"type":45,"tag":57,"props":69,"children":72},{"href":70,"rel":71},"https://twitter.com/paulg",[61],[73],{"type":54,"value":74},"Paul Graham",{"type":54,"value":76}," is an influential man in the tech and startup space.",{"type":45,"tag":50,"props":78,"children":79},{},[80,82,89,91,98],{"type":54,"value":81},"His Twitter activity keeps me entertained and informed, spanning from discussions about ",{"type":45,"tag":57,"props":83,"children":86},{"href":84,"rel":85},"https://twitter.com/paulg/status/1437423926980841472",[61],[87],{"type":54,"value":88},"air quality significantly impacting life expectancy",{"type":54,"value":90}," to interesting ",{"type":45,"tag":57,"props":92,"children":95},{"href":93,"rel":94},"https://twitter.com/paulg/status/1437453828606070784",[61],[96],{"type":54,"value":97},"discussions he has with his kids",{"type":54,"value":99},".",{"type":45,"tag":50,"props":101,"children":102},{},[103],{"type":54,"value":104},"The air pollution discussion this morning motivated me to want to see his feed and all of the interesting things a man like Paul sees. I started to follow the accounts he follows and after about 30 or so clicks I decided to investigate Twitter's API for a way to automate this.",{"type":45,"tag":50,"props":106,"children":107},{},[108,110,117],{"type":54,"value":109},"This is where I discovered ",{"type":45,"tag":57,"props":111,"children":114},{"href":112,"rel":113},"https://help.twitter.com/en/using-twitter/twitter-lists",[61],[115],{"type":54,"value":116},"Twitter Lists",{"type":54,"value":99},{"type":45,"tag":119,"props":120,"children":122},"h2",{"id":121},"twitter-lists-are-a-great-way-to-create-custom-feeds",[123],{"type":54,"value":124},"Twitter Lists are a great way to create custom feeds",{"type":45,"tag":46,"props":126,"children":127},{},[128],{"type":45,"tag":50,"props":129,"children":130},{},[131],{"type":54,"value":132},"Viewing a List timeline will show you a stream of Tweets from only the accounts on that List.",{"type":45,"tag":50,"props":134,"children":135},{},[136],{"type":54,"value":137},"Twitter Lists are the perfect solution. It gives me the ability to create custom feeds.",{"type":45,"tag":50,"props":139,"children":140},{},[141],{"type":54,"value":142},"If I feel like delving into Paul Grahams feed, it's a click away. Same with Elon Musk or any of the other influential users on Twitter.",{"type":45,"tag":119,"props":144,"children":146},{"id":145},"using-tweepy-to-automatically-generate-our-twitter-lists",[147],{"type":54,"value":148},"Using Tweepy to automatically generate our Twitter Lists",{"type":45,"tag":46,"props":150,"children":151},{},[152],{"type":45,"tag":50,"props":153,"children":154},{},[155,162],{"type":45,"tag":57,"props":156,"children":159},{"href":157,"rel":158},"https://www.tweepy.org/",[61],[160],{"type":54,"value":161},"Tweepy",{"type":54,"value":163}," is an easy-to-use Python library for accessing the Twitter API.",{"type":45,"tag":50,"props":165,"children":166},{},[167],{"type":54,"value":168},"Tweepy provides built in methods to easily interact with the Twitter API.",{"type":45,"tag":50,"props":170,"children":171},{},[172],{"type":54,"value":173},"In this project, I use the following from Tweepy:",{"type":45,"tag":175,"props":176,"children":177},"ul",{},[178,189,199,209,219,229],{"type":45,"tag":179,"props":180,"children":181},"li",{},[182],{"type":45,"tag":57,"props":183,"children":186},{"href":184,"rel":185},"https://docs.tweepy.org/en/stable/api.html?highlight=API#API",[61],[187],{"type":54,"value":188},"API class",{"type":45,"tag":179,"props":190,"children":191},{},[192],{"type":45,"tag":57,"props":193,"children":196},{"href":194,"rel":195},"https://docs.tweepy.org/en/latest/client.html",[61],[197],{"type":54,"value":198},"Client class",{"type":45,"tag":179,"props":200,"children":201},{},[202],{"type":45,"tag":57,"props":203,"children":206},{"href":204,"rel":205},"https://docs.tweepy.org/en/latest/api.html?highlight=create_list#tweepy.API.create_list",[61],[207],{"type":54,"value":208},".create_list()",{"type":45,"tag":179,"props":210,"children":211},{},[212],{"type":45,"tag":57,"props":213,"children":216},{"href":214,"rel":215},"https://docs.tweepy.org/en/v3.10.0/api.html?highlight=get_user#API.get_user",[61],[217],{"type":54,"value":218},".get_user()",{"type":45,"tag":179,"props":220,"children":221},{},[222],{"type":45,"tag":57,"props":223,"children":226},{"href":224,"rel":225},"https://docs.tweepy.org/en/latest/client.html?highlight=get_users_following#tweepy.client.get_users_following",[61],[227],{"type":54,"value":228},".get_users_following()",{"type":45,"tag":179,"props":230,"children":231},{},[232],{"type":45,"tag":57,"props":233,"children":236},{"href":234,"rel":235},"https://docs.tweepy.org/en/latest/api.html?highlight=add_list_members#tweepy.api.add_list_members",[61],[237],{"type":54,"value":238},".add_list_members",{"type":45,"tag":119,"props":240,"children":242},{"id":241},"authenticating-with-twitters-api-using-tweepy",[243],{"type":54,"value":244},"Authenticating with Twitter's API using Tweepy",{"type":45,"tag":46,"props":246,"children":247},{},[248],{"type":45,"tag":50,"props":249,"children":250},{},[251,253,259],{"type":54,"value":252},"This tutorial will assume you already have a Twitter developer account. If you do not, I went into detail ",{"type":45,"tag":57,"props":254,"children":257},{"href":255,"rel":256},"https://codybontecou.com/programmatically-tweeting-with-nodejs.html#getting-authenticated",[61],[258],{"type":54,"value":64},{"type":54,"value":260}," on how to generate the proper authentication keys needed to access Twitter's API.",{"type":45,"tag":50,"props":262,"children":263},{},[264,266,273,275,281,283,288,290,296,298,303,304,309,311,317],{"type":54,"value":265},"Tweepy provides the helper function ",{"type":45,"tag":267,"props":268,"children":270},"code",{"className":269},[],[271],{"type":54,"value":272},".OAuthHandler",{"type":54,"value":274}," that requires you to pass it your ",{"type":45,"tag":276,"props":277,"children":278},"em",{},[279],{"type":54,"value":280},"consumer key",{"type":54,"value":282}," and ",{"type":45,"tag":276,"props":284,"children":285},{},[286],{"type":54,"value":287},"consumer secret",{"type":54,"value":289}," initializing the auth object, you then must call its method ",{"type":45,"tag":267,"props":291,"children":293},{"className":292},[],[294],{"type":54,"value":295},".set_access_token()",{"type":54,"value":297}," which requires your ",{"type":45,"tag":276,"props":299,"children":300},{},[301],{"type":54,"value":302},"access token",{"type":54,"value":282},{"type":45,"tag":276,"props":305,"children":306},{},[307],{"type":54,"value":308},"access token secret",{"type":54,"value":310}," given to you when creating your developer account and ",{"type":45,"tag":57,"props":312,"children":314},{"href":255,"rel":313},[61],[315],{"type":54,"value":316},"generating your app",{"type":54,"value":99},{"type":45,"tag":319,"props":320,"children":324},"pre",{"className":321,"code":323,"language":18,"meta":6},[322],"language-python","import tweepy\n\nauth = tweepy.OAuthHandler(os.getenv(\"consumer_key\"), os.getenv(\"consumer_secret\"))\nauth.set_access_token(os.getenv(\"access_token\"), os.getenv(\"access_token_secret\"))\n",[325],{"type":45,"tag":267,"props":326,"children":327},{"__ignoreMap":6},[328],{"type":54,"value":323},{"type":45,"tag":119,"props":330,"children":332},{"id":331},"initializing-tweepys-api-and-client-objects",[333],{"type":54,"value":334},"Initializing Tweepy's API and Client objects",{"type":45,"tag":50,"props":336,"children":337},{},[338,340,346,347,353],{"type":54,"value":339},"We can now utilize our auth variable to create ",{"type":45,"tag":57,"props":341,"children":343},{"href":184,"rel":342},[61],[344],{"type":54,"value":345},"API",{"type":54,"value":282},{"type":45,"tag":57,"props":348,"children":350},{"href":194,"rel":349},[61],[351],{"type":54,"value":352},"Client",{"type":54,"value":354}," objects using the following code:",{"type":45,"tag":319,"props":356,"children":359},{"className":357,"code":358,"language":18,"meta":6},[322],"api = tweepy.API(auth)\nclient = tweepy.Client(\n    bearer_token=os.getenv(\"bearer_token\"),\n    consumer_key=os.getenv(\"consumer_key\"),\n    consumer_secret=os.getenv(\"consumer_secret\"),\n    access_token=os.getenv(\"access_token\"),\n    access_token_secret=os.getenv(\"access_token_secret\"),\n    wait_on_rate_limit=True,\n)\n",[360],{"type":45,"tag":267,"props":361,"children":362},{"__ignoreMap":6},[363],{"type":54,"value":358},{"type":45,"tag":50,"props":365,"children":366},{},[367],{"type":54,"value":368},"With these objects, we can now access every Twitter endpoint.",{"type":45,"tag":119,"props":370,"children":372},{"id":371},"creating-a-list-using-tweepys-api",[373],{"type":54,"value":374},"Creating a List using Tweepy's API",{"type":45,"tag":50,"props":376,"children":377},{},[378],{"type":54,"value":379},"Tweepy methods used:",{"type":45,"tag":175,"props":381,"children":382},{},[383],{"type":45,"tag":179,"props":384,"children":385},{},[386,391,393,399,401,407],{"type":45,"tag":57,"props":387,"children":389},{"href":204,"rel":388},[61],[390],{"type":54,"value":208},{"type":54,"value":392},": Takes three parameters: name, mode, and description. Name and description are self-explanatory and mode can either be ",{"type":45,"tag":267,"props":394,"children":396},{"className":395},[],[397],{"type":54,"value":398},"\"public\"",{"type":54,"value":400}," or ",{"type":45,"tag":267,"props":402,"children":404},{"className":403},[],[405],{"type":54,"value":406},"\"private\"",{"type":54,"value":408}," to define the visibility status of the List.",{"type":45,"tag":50,"props":410,"children":411},{},[412,414,420],{"type":54,"value":413},"The response from a successfully List creation returns the List data. I will be using this list later on, so I decided to extract it's id into the variable ",{"type":45,"tag":267,"props":415,"children":417},{"className":416},[],[418],{"type":54,"value":419},"list_id",{"type":54,"value":99},{"type":45,"tag":319,"props":422,"children":425},{"className":423,"code":424,"language":18,"meta":6},[322],"list_name = \"Paul Grahams's Feed\"\nlist_description = \"A list of everyone Paul Graham follows\"\n\ntwitter_list = api.create_list(name=list_name, description=list_description)\nlist_id = twitter_list._json[\"id\"]\n",[426],{"type":45,"tag":267,"props":427,"children":428},{"__ignoreMap":6},[429],{"type":54,"value":424},{"type":45,"tag":119,"props":431,"children":433},{"id":432},"getting-a-user-and-the-accounts-they-follow",[434],{"type":54,"value":435},"Getting a User and the accounts they follow",{"type":45,"tag":50,"props":437,"children":438},{},[439],{"type":54,"value":379},{"type":45,"tag":175,"props":441,"children":442},{},[443,451],{"type":45,"tag":179,"props":444,"children":445},{},[446],{"type":45,"tag":57,"props":447,"children":449},{"href":214,"rel":448},[61],[450],{"type":54,"value":218},{"type":45,"tag":179,"props":452,"children":453},{},[454],{"type":45,"tag":57,"props":455,"children":457},{"href":224,"rel":456},[61],[458],{"type":54,"value":228},{"type":45,"tag":50,"props":460,"children":461},{},[462,464,470],{"type":54,"value":463},"By passing ",{"type":45,"tag":267,"props":465,"children":467},{"className":466},[],[468],{"type":54,"value":469},"client.get_user()",{"type":54,"value":471}," a twitter handle - in this case, Paul Graham - I can get all of the public data Twitter provides regarding that user.",{"type":45,"tag":50,"props":473,"children":474},{},[475,477,483,485,491],{"type":54,"value":476},"I then use that user's data with ",{"type":45,"tag":267,"props":478,"children":480},{"className":479},[],[481],{"type":54,"value":482},"client.get_users_following()",{"type":54,"value":484}," alongside max_results. The argument ",{"type":45,"tag":267,"props":486,"children":488},{"className":487},[],[489],{"type":54,"value":490},"max_results",{"type":54,"value":492}," defines how many user objects Twitter will pass back. In this case, I used the max of 1000. The default is 100.",{"type":45,"tag":319,"props":494,"children":497},{"className":495,"code":496,"language":18,"meta":6},[322],"twitter_handle = \"paulg\"\nuser = client.get_user(username=twitter_handle)\n\nfollowers = client.get_users_following(id=user.data.id, max_results=1000)\n",[498],{"type":45,"tag":267,"props":499,"children":500},{"__ignoreMap":6},[501],{"type":54,"value":496},{"type":45,"tag":119,"props":503,"children":505},{"id":504},"automatially-adding-users-to-the-list",[506],{"type":54,"value":507},"Automatially adding users to the list",{"type":45,"tag":50,"props":509,"children":510},{},[511],{"type":54,"value":379},{"type":45,"tag":175,"props":513,"children":514},{},[515],{"type":45,"tag":179,"props":516,"children":517},{},[518],{"type":45,"tag":57,"props":519,"children":521},{"href":234,"rel":520},[61],[522],{"type":54,"value":238},{"type":45,"tag":50,"props":524,"children":525},{},[526,528,534],{"type":54,"value":527},"Now that we have the List we want to populate and the followers we want populate it with, we use the ",{"type":45,"tag":267,"props":529,"children":531},{"className":530},[],[532],{"type":54,"value":533},"api.add_list_members()",{"type":54,"value":535}," method.",{"type":45,"tag":50,"props":537,"children":538},{},[539],{"type":54,"value":540},"This method takes a list of up to 100 Twitter User ID's. The code snippet below chunks out follower data into sections of 100 Users and generates a list of ids to pass.",{"type":45,"tag":50,"props":542,"children":543},{},[544,546,551],{"type":54,"value":545},"We are also passing this method the ",{"type":45,"tag":267,"props":547,"children":549},{"className":548},[],[550],{"type":54,"value":419},{"type":54,"value":552}," that was saved when we created the list.",{"type":45,"tag":319,"props":554,"children":557},{"className":555,"code":556,"language":18,"meta":6},[322],"for i in range(0, len(followers.data), 100):\n    ids = [follower[\"id\"] for follower in followers.data[i : i + 100]]\n    api.add_list_members(list_id=list_id, user_id=ids)\n",[558],{"type":45,"tag":267,"props":559,"children":560},{"__ignoreMap":6},[561],{"type":54,"value":556},{"type":45,"tag":119,"props":563,"children":565},{"id":564},"things-to-keep-in-mind-when-working-with-twitters-api",[566],{"type":54,"value":567},"Things to keep in mind when working with Twitter's API",{"type":45,"tag":50,"props":569,"children":570},{},[571,573,580],{"type":54,"value":572},"Twitter rate limits just about all of their endpoints. ",{"type":45,"tag":57,"props":574,"children":577},{"href":575,"rel":576},"https://developer.twitter.com/en/docs/twitter-api/v1/rate-limits",[61],[578],{"type":54,"value":579},"Here",{"type":54,"value":581}," is Twitter's documentation on what the rate limits are. Keep this is mind when developing Twitter-based applications because you may find yourself with an odd error.",{"type":45,"tag":50,"props":583,"children":584},{},[585],{"type":54,"value":586},"Thank you for reading! I hope you enjoyed it.",{"title":6,"searchDepth":588,"depth":588,"links":589},2,[590,591,592,593,594,595,596,597],{"id":121,"depth":588,"text":124},{"id":145,"depth":588,"text":148},{"id":241,"depth":588,"text":244},{"id":331,"depth":588,"text":334},{"id":371,"depth":588,"text":374},{"id":432,"depth":588,"text":435},{"id":504,"depth":588,"text":507},{"id":564,"depth":588,"text":567},"markdown","content:generate-twitter-lists-with-python.md","content","generate-twitter-lists-with-python.md","generate-twitter-lists-with-python","md",{"_path":605,"_dir":6,"_draft":7,"_partial":7,"_locale":6,"title":606,"description":9,"type":10,"author":607,"date":608,"category":15,"dropdown":16,"tags":609,"meta":613,"canonicalUrl":622,"topics":623,"created_at":39,"last_modified":40,"body":628,"_type":598,"_id":1286,"_source":600,"_file":1287,"_stem":1288,"_extension":603},"/selenium-movie-picker","Building a Random Movie Picker Using Python and Selenium",{"name":12,"image":13},"2020-09-07T00:00:00.000Z",[16,610,611,612],"Selenium","Web-scraping","Automation",[614,615,617,619,620,621],{"name":24,"content":606},{"name":26,"content":616},"Scraping a list of directors using Selenium with Python to query IMDb's database and randomly select a movie.",{"name":29,"content":618},"https://codybontecou.com/images/selenium-movie-picker-meta.png",{"name":32,"content":606},{"name":34,"content":606},{"name":36,"content":606},"https://codybontecou.com/selenium-movie-picker.html",[624,18,625,626,627],"web scraping","selenium","IMDB","data",{"type":42,"children":629,"toc":1272},[630,653,670,676,684,719,731,744,750,755,769,775,780,801,818,840,846,851,860,1051,1057,1067,1074,1083,1114,1119,1140,1146,1167,1188,1197,1203,1208,1213,1222,1228,1242,1251,1257,1267],{"type":45,"tag":50,"props":631,"children":632},{},[633,635,642,644,651],{"type":54,"value":634},"My wife (Dany) has been reviewing movies every week and posting them on her ",{"type":45,"tag":57,"props":636,"children":639},{"href":637,"rel":638},"https://www.youtube.com/channel/UCcLR5qe7dzXR-5UB_nyK_2w",[61],[640],{"type":54,"value":641},"Youtube Channel",{"type":54,"value":643},". She recently asked me if it was possible to scrape ",{"type":45,"tag":57,"props":645,"children":648},{"href":646,"rel":647},"https://www.elacervo.com/directores",[61],[649],{"type":54,"value":650},"this list of directors",{"type":54,"value":652}," and return a random movie they directed in order to help her decide on which movie to review next.",{"type":45,"tag":50,"props":654,"children":655},{},[656,658,669],{"type":54,"value":657},"Sounds like a job for some ",{"type":45,"tag":276,"props":659,"children":660},{},[661,663],{"type":54,"value":662},"good-ol-web-",{"type":45,"tag":57,"props":664,"children":667},{"href":665,"rel":666},"https://selenium-python.readthedocs.io/",[61],[668],{"type":54,"value":625},{"type":54,"value":99},{"type":45,"tag":119,"props":671,"children":673},{"id":672},"how-i-chose-to-approach-this-problem",[674],{"type":54,"value":675},"How I Chose to Approach this Problem.",{"type":45,"tag":46,"props":677,"children":678},{},[679],{"type":45,"tag":50,"props":680,"children":681},{},[682],{"type":54,"value":683},"Scraping websites can be finicky. You're at the whim of the content creators markdown decisions.",{"type":45,"tag":50,"props":685,"children":686},{},[687,689,695,697,702,704,710,712,718],{"type":54,"value":688},"The markup of ",{"type":45,"tag":57,"props":690,"children":692},{"href":646,"rel":691},[61],[693],{"type":54,"value":694},"Elacervo",{"type":54,"value":696}," is tricky. Their director's page is consistent, but the individual director posts are not. Some director pages have their movie list individual ",{"type":45,"tag":267,"props":698,"children":700},{"className":699},[],[701],{"type":54,"value":50},{"type":54,"value":703}," tags while some have their entire movie list formatted within a single ",{"type":45,"tag":267,"props":705,"children":707},{"className":706},[],[708],{"type":54,"value":709},"span",{"type":54,"value":711}," element. ",{"type":45,"tag":713,"props":714,"children":715},"strong",{},[716],{"type":54,"value":717},"This is a problem",{"type":54,"value":99},{"type":45,"tag":50,"props":720,"children":721},{},[722,724,729],{"type":54,"value":723},"Rather than trying to hack together a way to get ",{"type":45,"tag":276,"props":725,"children":726},{},[727],{"type":54,"value":728},"most",{"type":54,"value":730}," of the directors videos, I chose to get the list of directors and gather their movie lists from a reliable source.",{"type":45,"tag":50,"props":732,"children":733},{},[734,736,743],{"type":54,"value":735},"I chose IMDB's which has a convenient python wrapper around their API ",{"type":45,"tag":57,"props":737,"children":740},{"href":738,"rel":739},"https://imdbpy.github.io/",[61],[741],{"type":54,"value":742},"IMDbPY",{"type":54,"value":99},{"type":45,"tag":119,"props":745,"children":747},{"id":746},"why-did-i-pick-selenium-as-the-tool-for-this",[748],{"type":54,"value":749},"Why did I pick Selenium as the Tool for this?",{"type":45,"tag":50,"props":751,"children":752},{},[753],{"type":54,"value":754},"Dany is a beginner web developer and is curious about Python. Selenium provides the developer with visual confirmation with the automated browser interactions. Spawning a new browser instance and clicking through the site does impact performance, but I believe the benefits of the visual aspect of Selenium out-weighs the performance issues.",{"type":45,"tag":50,"props":756,"children":757},{},[758,760,767],{"type":54,"value":759},"A framework such as ",{"type":45,"tag":57,"props":761,"children":764},{"href":762,"rel":763},"https://scrapy.org/",[61],[765],{"type":54,"value":766},"Scrapy",{"type":54,"value":768}," would provide the data quicker, but a big reason I'm building this is to help Dany learn Python.",{"type":45,"tag":119,"props":770,"children":772},{"id":771},"setting-up-selenium-to-automate-my-browser",[773],{"type":54,"value":774},"Setting up Selenium to Automate my Browser",{"type":45,"tag":50,"props":776,"children":777},{},[778],{"type":54,"value":779},"Selenium takes a bit of setting up in order to start automating your browser.",{"type":45,"tag":50,"props":781,"children":782},{},[783,785,792,794,800],{"type":54,"value":784},"Using Python 3's built in package manager ",{"type":45,"tag":57,"props":786,"children":789},{"href":787,"rel":788},"https://pypi.org/project/pip/",[61],[790],{"type":54,"value":791},"pip",{"type":54,"value":793},", download Selenium with the command ",{"type":45,"tag":267,"props":795,"children":797},{"className":796},[],[798],{"type":54,"value":799},"pip install selenium",{"type":54,"value":99},{"type":45,"tag":46,"props":802,"children":803},{},[804],{"type":45,"tag":50,"props":805,"children":806},{},[807,809,816],{"type":54,"value":808},"I highly recommend taking advantage of a ",{"type":45,"tag":57,"props":810,"children":813},{"href":811,"rel":812},"https://virtualenv.pypa.io/en/latest/",[61],[814],{"type":54,"value":815},"virtualenv",{"type":54,"value":817}," and creating an isolated Python environment.",{"type":45,"tag":50,"props":819,"children":820},{},[821,823,830,832,839],{"type":54,"value":822},"You will also need to download the appropriate web driver. Selenium's ",{"type":45,"tag":57,"props":824,"children":827},{"href":825,"rel":826},"https://selenium-python.readthedocs.io/installation.html#drivers",[61],[828],{"type":54,"value":829},"documentation",{"type":54,"value":831}," has links to the most popular browser drivers. For this tutorial, I will be using Google Chrome and ",{"type":45,"tag":57,"props":833,"children":836},{"href":834,"rel":835},"https://sites.google.com/chromium.org/driver/",[61],[837],{"type":54,"value":838},"Chromedriver",{"type":54,"value":99},{"type":45,"tag":119,"props":841,"children":843},{"id":842},"using-selenium-and-python-to-gather-the-directors",[844],{"type":54,"value":845},"Using Selenium and Python to Gather the Directors",{"type":45,"tag":50,"props":847,"children":848},{},[849],{"type":54,"value":850},"Below is the code snippet I decided to use. I've appended numbers comments to describe important choices made within the snippet.",{"type":45,"tag":319,"props":852,"children":855},{"className":853,"code":854,"language":18,"meta":6},[322],"import json\nfrom selenium import webdriver\n\ndriver = webdriver.Chrome('chromedriver') // 1\ndriver.get('https://www.elacervo.com/directores') // 2\n\n// 3\nfor i in range(4):\n  time.sleep(5)\n  driver.execute_script(\"window.scrollTo(0, document.body.scrollHeight);\")\n\n// 4\ndirectors = driver.find_elements_by_css_selector(\n  \"a[href*='https://www.elacervo.com/post/']\"\n  )\n\n// 5\nunique_directors = []\nfor link in directors:\n  if (link.get_attribute(\"href\")) not in unique_directors:\n    unique_directors.append(link.get_attribute(\"href\"))\n\n// 6\nnames = []\nfor link in unique_directors:\n  slug = link.split('/')[-1]\n  name = slug.replace('-', ' ').title()\n  names.append({\"name\": name})\n\n// 7\nwith open('directors.json', 'w') as outfile:\n  json.dump(names, outfile)\n\n// 8\ndriver.quit()\n",[856],{"type":45,"tag":267,"props":857,"children":858},{"__ignoreMap":6},[859],{"type":54,"value":854},{"type":45,"tag":861,"props":862,"children":863},"ol",{},[864,891,908,913,956,976,1005,1040],{"type":45,"tag":179,"props":865,"children":866},{},[867,873,875,881,883,889],{"type":45,"tag":267,"props":868,"children":870},{"className":869},[],[871],{"type":54,"value":872},"driver = webdriver.Chrome('chromedriver')",{"type":54,"value":874}," - This is where we are telling Selenium to use spawn a new Google Chrome instance. The value, ",{"type":45,"tag":267,"props":876,"children":878},{"className":877},[],[879],{"type":54,"value":880},"chromedriver",{"type":54,"value":882},", that we are passing to the ",{"type":45,"tag":267,"props":884,"children":886},{"className":885},[],[887],{"type":54,"value":888},".Chrome()",{"type":54,"value":890}," method is the location of the chromedriver file we downloaded in the previous step.",{"type":45,"tag":179,"props":892,"children":893},{},[894,900,902,907],{"type":45,"tag":267,"props":895,"children":897},{"className":896},[],[898],{"type":54,"value":899},"driver.get('https://www.elacervo.com/directores')",{"type":54,"value":901}," - Here we are telling our now made Selenium driver to navigate to the URL ",{"type":45,"tag":267,"props":903,"children":905},{"className":904},[],[906],{"type":54,"value":646},{"type":54,"value":99},{"type":45,"tag":179,"props":909,"children":910},{},[911],{"type":54,"value":912},"The website I am scraping has some lazy-loading logic where only a certain number of directors are loaded until the page is scrolled to the bottom. This is executing some client-side javascript to scroll to the bottom of the page, wait a few seconds for the new directors to load, then scroll to the new bottom of the page.",{"type":45,"tag":179,"props":914,"children":915},{},[916,918,923,925,931,933,939,941,947,949,955],{"type":54,"value":917},"Here I am gathering all of the html events that contain an ",{"type":45,"tag":267,"props":919,"children":921},{"className":920},[],[922],{"type":54,"value":57},{"type":54,"value":924}," tag with and ",{"type":45,"tag":267,"props":926,"children":928},{"className":927},[],[929],{"type":54,"value":930},"href",{"type":54,"value":932}," that contains ",{"type":45,"tag":267,"props":934,"children":936},{"className":935},[],[937],{"type":54,"value":938},"https://www.elacervo.com/post/",{"type":54,"value":940},". This is using the logic ",{"type":45,"tag":267,"props":942,"children":944},{"className":943},[],[945],{"type":54,"value":946},"href*=",{"type":54,"value":948}," which includes the wildcard character ",{"type":45,"tag":267,"props":950,"children":952},{"className":951},[],[953],{"type":54,"value":954},"*",{"type":54,"value":99},{"type":45,"tag":179,"props":957,"children":958},{},[959,961,966,968,974],{"type":54,"value":960},"This is extracting the directors URL that is inside the ",{"type":45,"tag":267,"props":962,"children":964},{"className":963},[],[965],{"type":54,"value":930},{"type":54,"value":967}," source. It's then placing the URL into a ",{"type":45,"tag":267,"props":969,"children":971},{"className":970},[],[972],{"type":54,"value":973},"unique_directors",{"type":54,"value":975}," list. Some of the directors on this page have their link twice so I'm removing any duplicate URLs.",{"type":45,"tag":179,"props":977,"children":978},{},[979,981,987,989,995,997,1003],{"type":54,"value":980},"I'm cleaning the URL links to simply get the directors names from them. The links gathered look like ",{"type":45,"tag":267,"props":982,"children":984},{"className":983},[],[985],{"type":54,"value":986},"https://www.elacervo.com/post/martin-scorsese",{"type":54,"value":988},". The logic here is taking everything after the last ",{"type":45,"tag":267,"props":990,"children":992},{"className":991},[],[993],{"type":54,"value":994},"/",{"type":54,"value":996}," character, replacing ",{"type":45,"tag":267,"props":998,"children":1000},{"className":999},[],[1001],{"type":54,"value":1002},"-",{"type":54,"value":1004},"'s with spaces, and then capitalizing the first letter of each word within their names.",{"type":45,"tag":179,"props":1006,"children":1007},{},[1008,1010,1016,1018,1024,1026,1031,1033,1038],{"type":54,"value":1009},"I then using ",{"type":45,"tag":267,"props":1011,"children":1013},{"className":1012},[],[1014],{"type":54,"value":1015},"json.dump",{"type":54,"value":1017}," to write the gathered director names into a ",{"type":45,"tag":267,"props":1019,"children":1021},{"className":1020},[],[1022],{"type":54,"value":1023},"json",{"type":54,"value":1025}," file for quicker use later on. Reading from a ",{"type":45,"tag":267,"props":1027,"children":1029},{"className":1028},[],[1030],{"type":54,"value":1023},{"type":54,"value":1032}," file is ",{"type":45,"tag":713,"props":1034,"children":1035},{},[1036],{"type":54,"value":1037},"much quicker",{"type":54,"value":1039}," than spawning a browser to click around and extract data.",{"type":45,"tag":179,"props":1041,"children":1042},{},[1043,1049],{"type":45,"tag":267,"props":1044,"children":1046},{"className":1045},[],[1047],{"type":54,"value":1048},"driver.quit()",{"type":54,"value":1050}," - This closes the a Selenium Chrome instance.",{"type":45,"tag":119,"props":1052,"children":1054},{"id":1053},"using-imdbpy-to-query-imdbs-database",[1055],{"type":54,"value":1056},"Using IMDbPY to Query IMDBs Database",{"type":45,"tag":50,"props":1058,"children":1059},{},[1060,1065],{"type":45,"tag":57,"props":1061,"children":1063},{"href":738,"rel":1062},[61],[1064],{"type":54,"value":742},{"type":54,"value":1066}," is a pretty neat package for querying IMDB's data. With only a few lines of Python, we can see the entire filmography of a directory.",{"type":45,"tag":1068,"props":1069,"children":1071},"h3",{"id":1070},"this-python-snippet-will-return-every-film-for-each-director",[1072],{"type":54,"value":1073},"This Python Snippet Will Return Every Film for Each Director",{"type":45,"tag":319,"props":1075,"children":1078},{"className":1076,"code":1077,"language":18,"meta":6},[322],"import json\nfrom imdb import IMDb\n\nfile = open('directors.json',)\ndirectors = json.load(file)\n\nmovies = []\nia = IMDb()\nfor person in directors:\n  try:\n    director = ia.search_person(person['name'])[0]\n    try:\n      films = ia.get_person_filmography(director.personID)['data']['filmography']['director']\n      for film in films:\n        if film['kind'] == 'movie':\n          try:\n            if (film['year']):\n              movies.append(film)\n          except KeyError:\n            continue\n    except AttributeError:\n      continue\n  except IndexError:\n    continue\n\n  with open('movies.json', 'w') as outfile:\n    json.dump([{\"title\": movie['title'], 'year': movie['year']} for movie in movies], outfile)\n",[1079],{"type":45,"tag":267,"props":1080,"children":1081},{"__ignoreMap":6},[1082],{"type":54,"value":1077},{"type":45,"tag":50,"props":1084,"children":1085},{},[1086,1088,1095,1097,1103,1105,1112],{"type":54,"value":1087},"We use Python's built in ",{"type":45,"tag":57,"props":1089,"children":1092},{"href":1090,"rel":1091},"https://docs.python.org/3/library/functions.html#open",[61],[1093],{"type":54,"value":1094},"open",{"type":54,"value":1096}," function to open the ",{"type":45,"tag":267,"props":1098,"children":1100},{"className":1099},[],[1101],{"type":54,"value":1102},"directors.json",{"type":54,"value":1104}," file we created in the Selenium section. Then using Python's ",{"type":45,"tag":57,"props":1106,"children":1109},{"href":1107,"rel":1108},"https://docs.python.org/3/library/json.html",[61],[1110],{"type":54,"value":1111},"JSON decoder",{"type":54,"value":1113},", we can load data from the file into a usable JSON format.",{"type":45,"tag":50,"props":1115,"children":1116},{},[1117],{"type":54,"value":1118},"Initializing an IMDb object gives us access to the packages functions, allowing us to query IMDb's database.",{"type":45,"tag":50,"props":1120,"children":1121},{},[1122,1124,1130,1132,1138],{"type":54,"value":1123},"The method ",{"type":45,"tag":267,"props":1125,"children":1127},{"className":1126},[],[1128],{"type":54,"value":1129},".search_person(person['name'])",{"type":54,"value":1131}," returns a list of people IMDb has within in their database. It appears the first result in the returned list is the most popular and reasoning behind the ",{"type":45,"tag":267,"props":1133,"children":1135},{"className":1134},[],[1136],{"type":54,"value":1137},"[0]",{"type":54,"value":1139},". For this project, I'm making the assumption that is the director I want to work with.",{"type":45,"tag":1068,"props":1141,"children":1143},{"id":1142},"differentiating-movie-from-other-film-types",[1144],{"type":54,"value":1145},"Differentiating Movie From Other Film Types",{"type":45,"tag":50,"props":1147,"children":1148},{},[1149,1151,1157,1159,1165],{"type":54,"value":1150},"IMDbPY ",{"type":45,"tag":267,"props":1152,"children":1154},{"className":1153},[],[1155],{"type":54,"value":1156},"Movie",{"type":54,"value":1158}," objects properties can be seen documented ",{"type":45,"tag":57,"props":1160,"children":1163},{"href":1161,"rel":1162},"https://imdbpy.readthedocs.io/en/latest/usage/movie.html",[61],[1164],{"type":54,"value":64},{"type":54,"value":1166},". For this project, I'm just interested in movies, so I apply a conditional to check, appending the accepted films to a movies list.",{"type":45,"tag":50,"props":1168,"children":1169},{},[1170,1172,1178,1180,1186],{"type":54,"value":1171},"It turns out that IMDbPY's Movie object only has the property ",{"type":45,"tag":267,"props":1173,"children":1175},{"className":1174},[],[1176],{"type":54,"value":1177},"year",{"type":54,"value":1179}," if the movie has been released, otherwise, it has the property ",{"type":45,"tag":267,"props":1181,"children":1183},{"className":1182},[],[1184],{"type":54,"value":1185},"status",{"type":54,"value":1187},". I only want movies that are watchable now, and filter out the data accordingly.",{"type":45,"tag":319,"props":1189,"children":1192},{"className":1190,"code":1191,"language":18,"meta":6},[322],"movies = []\nif film['kind'] == 'movie':\n    try:\n        if (film['year']):\n            movies.append(film)\n    except KeyError:\n        continue\n",[1193],{"type":45,"tag":267,"props":1194,"children":1195},{"__ignoreMap":6},[1196],{"type":54,"value":1191},{"type":45,"tag":1068,"props":1198,"children":1200},{"id":1199},"writing-the-movie-data-to-a-reusable-json-file",[1201],{"type":54,"value":1202},"Writing the Movie Data to a Reusable JSON File",{"type":45,"tag":50,"props":1204,"children":1205},{},[1206],{"type":54,"value":1207},"Like the data extracted using Selenium, I decided to reduce the number of API requests to IMDb by writing the acquired data into a reusable JSON file.",{"type":45,"tag":50,"props":1209,"children":1210},{},[1211],{"type":54,"value":1212},"Rather than extracting all of the IMDb Movie object's data, I decided to simply take the movie's title and year values. In the future, it could be cool to extract additional data allowing for advanced filtering. For example, wanting to only watch a movie between the years 1970 and 1980 with a rating greater than 9.0. Although the IMDb Movie object said it has certain properties, it ended up being a bit finicky and I decided against it for now.",{"type":45,"tag":319,"props":1214,"children":1217},{"className":1215,"code":1216,"language":18,"meta":6},[322],"with open('movies.json', 'w') as outfile:\n    json.dump([{\"title\": movie['title'], 'year': movie['year']} for movie in movies], outfile)\n",[1218],{"type":45,"tag":267,"props":1219,"children":1220},{"__ignoreMap":6},[1221],{"type":54,"value":1216},{"type":45,"tag":1068,"props":1223,"children":1225},{"id":1224},"randomly-selecting-the-movie-from-our-list",[1226],{"type":54,"value":1227},"Randomly Selecting the Movie From Our List",{"type":45,"tag":50,"props":1229,"children":1230},{},[1231,1233,1240],{"type":54,"value":1232},"Now that we have a list of all of the movies from our group of directors in a json file, I can use Python's ",{"type":45,"tag":57,"props":1234,"children":1237},{"href":1235,"rel":1236},"https://docs.python.org/3/library/random.html#random.choice",[61],[1238],{"type":54,"value":1239},"random.choice",{"type":54,"value":1241}," to randomly select a movie.",{"type":45,"tag":319,"props":1243,"children":1246},{"className":1244,"code":1245,"language":18,"meta":6},[322],"import random\nimport json\n\nfile = open('movies.json')\ndata = json.load(file)\nprint(random.choice(data))\n",[1247],{"type":45,"tag":267,"props":1248,"children":1249},{"__ignoreMap":6},[1250],{"type":54,"value":1245},{"type":45,"tag":119,"props":1252,"children":1254},{"id":1253},"random-movie-watching-is-fun",[1255],{"type":54,"value":1256},"Random Movie Watching is fun!",{"type":45,"tag":50,"props":1258,"children":1259},{},[1260,1265],{"type":45,"tag":713,"props":1261,"children":1262},{},[1263],{"type":54,"value":1264},"Seriously",{"type":54,"value":1266}," give it a shot. At the very least, randomly select a movie and watch its trailer. Many of these movies I had never heard of but they are fascinating, creative and artistic.",{"type":45,"tag":50,"props":1268,"children":1269},{},[1270],{"type":54,"value":1271},"I hope this article was helpful!",{"title":6,"searchDepth":588,"depth":588,"links":1273},[1274,1275,1276,1277,1278,1285],{"id":672,"depth":588,"text":675},{"id":746,"depth":588,"text":749},{"id":771,"depth":588,"text":774},{"id":842,"depth":588,"text":845},{"id":1053,"depth":588,"text":1056,"children":1279},[1280,1282,1283,1284],{"id":1070,"depth":1281,"text":1073},3,{"id":1142,"depth":1281,"text":1145},{"id":1199,"depth":1281,"text":1202},{"id":1224,"depth":1281,"text":1227},{"id":1253,"depth":588,"text":1256},"content:selenium-movie-picker.md","selenium-movie-picker.md","selenium-movie-picker",1731218953405]