[{"data":1,"prerenderedAt":2300},["ShallowReactive",2],{"post-/topics/mocking":3},[4,691],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":6,"title":8,"description":9,"type":10,"author":11,"date":14,"last_modified_date":14,"slug":15,"dropdown":16,"meta":17,"canonicalUrl":31,"topics":32,"body":36,"_type":686,"_id":687,"_source":688,"_file":689,"_stem":15,"_extension":690},"/mocking-http-responses-in-elixir-and-phoenix","",false,"Mocking HTTP Responses in Elixir and Phoenix","A quick walkthrough of the configuration needed to support mocks and modules only used within your Elixir tests","post",{"name":12,"image":13},"Cody Bontecou","/assets/img/cody.64b57256.jpg","2023-08-13T00:00:00.000Z","mocking-http-responses-in-elixir-and-phoenix","Elixir",[18,20,23,25,27,29],{"name":19,"content":9},"og:description",{"name":21,"content":22},"og:image","https://codybontecou.com/images/mocking-http-responses-in-elixir-and-phoenix.png",{"name":24,"content":9},"og:image:alt",{"name":26,"content":8},"og:title",{"name":28,"content":8},"twitter:title",{"name":30,"content":8},"twitter:text:title","https://codybontecou.com/mocking-http-responses-in-elixir-and-phoenix.html",[33,34,35],"elixir","testing","mocking",{"type":37,"children":38,"toc":681},"root",[39,49,56,66,73,78,134,139,229,249,255,276,300,327,600,605,656,662,675],{"type":40,"tag":41,"props":42,"children":43},"element","h1",{"id":6},[44],{"type":40,"tag":45,"props":46,"children":48},"binding",{"value":47},"$frontmatter.title",[],{"type":40,"tag":50,"props":51,"children":52},"p",{},[53],{"type":54,"value":55},"text","I just came across this error while attempting to mock the response of a 3rd party api:",{"type":40,"tag":50,"props":57,"children":58},{},[59],{"type":40,"tag":60,"props":61,"children":63},"code",{"className":62},[],[64],{"type":54,"value":65},"** (UndefinedFunctionError) function LeagueInfoMocks.get_live/0 is undefined (module LeagueInfoMocks is not available)",{"type":40,"tag":67,"props":68,"children":70},"h2",{"id":69},"the-problem",[71],{"type":54,"value":72},"The Problem",{"type":40,"tag":50,"props":74,"children":75},{},[76],{"type":54,"value":77},"I couldn't wrap my head around it. I have this simple mock module defined:",{"type":40,"tag":79,"props":80,"children":83},"pre",{"className":81,"code":82,"language":33,"meta":6,"style":6},"language-elixir shiki shiki-themes github-light","defmodule LeagueInfoMocks do\n  def get_live do\n    %{...}\n  end\nend\n\n",[84],{"type":40,"tag":60,"props":85,"children":86},{"__ignoreMap":6},[87,98,107,116,125],{"type":40,"tag":88,"props":89,"children":92},"span",{"class":90,"line":91},"line",1,[93],{"type":40,"tag":88,"props":94,"children":95},{},[96],{"type":54,"value":97},"defmodule LeagueInfoMocks do\n",{"type":40,"tag":88,"props":99,"children":101},{"class":90,"line":100},2,[102],{"type":40,"tag":88,"props":103,"children":104},{},[105],{"type":54,"value":106},"  def get_live do\n",{"type":40,"tag":88,"props":108,"children":110},{"class":90,"line":109},3,[111],{"type":40,"tag":88,"props":112,"children":113},{},[114],{"type":54,"value":115},"    %{...}\n",{"type":40,"tag":88,"props":117,"children":119},{"class":90,"line":118},4,[120],{"type":40,"tag":88,"props":121,"children":122},{},[123],{"type":54,"value":124},"  end\n",{"type":40,"tag":88,"props":126,"children":128},{"class":90,"line":127},5,[129],{"type":40,"tag":88,"props":130,"children":131},{},[132],{"type":54,"value":133},"end\n",{"type":40,"tag":50,"props":135,"children":136},{},[137],{"type":54,"value":138},"And a test module to interact with the get_live function:",{"type":40,"tag":79,"props":140,"children":142},{"className":81,"code":141,"language":33,"meta":6,"style":6},"defmodule LeagueInfoTest do\n  use ExUnit.Case\n  test \"format_info\" do\n    data = LeagueInfoMocks.get_live()\n\n    [match | _tail] = data\n\n    assert LeagueInfo.format_info(data) == %{...}\n  end\nend\n\n",[143],{"type":40,"tag":60,"props":144,"children":145},{"__ignoreMap":6},[146,154,162,170,178,187,196,204,213,221],{"type":40,"tag":88,"props":147,"children":148},{"class":90,"line":91},[149],{"type":40,"tag":88,"props":150,"children":151},{},[152],{"type":54,"value":153},"defmodule LeagueInfoTest do\n",{"type":40,"tag":88,"props":155,"children":156},{"class":90,"line":100},[157],{"type":40,"tag":88,"props":158,"children":159},{},[160],{"type":54,"value":161},"  use ExUnit.Case\n",{"type":40,"tag":88,"props":163,"children":164},{"class":90,"line":109},[165],{"type":40,"tag":88,"props":166,"children":167},{},[168],{"type":54,"value":169},"  test \"format_info\" do\n",{"type":40,"tag":88,"props":171,"children":172},{"class":90,"line":118},[173],{"type":40,"tag":88,"props":174,"children":175},{},[176],{"type":54,"value":177},"    data = LeagueInfoMocks.get_live()\n",{"type":40,"tag":88,"props":179,"children":180},{"class":90,"line":127},[181],{"type":40,"tag":88,"props":182,"children":184},{"emptyLinePlaceholder":183},true,[185],{"type":54,"value":186},"\n",{"type":40,"tag":88,"props":188,"children":190},{"class":90,"line":189},6,[191],{"type":40,"tag":88,"props":192,"children":193},{},[194],{"type":54,"value":195},"    [match | _tail] = data\n",{"type":40,"tag":88,"props":197,"children":199},{"class":90,"line":198},7,[200],{"type":40,"tag":88,"props":201,"children":202},{"emptyLinePlaceholder":183},[203],{"type":54,"value":186},{"type":40,"tag":88,"props":205,"children":207},{"class":90,"line":206},8,[208],{"type":40,"tag":88,"props":209,"children":210},{},[211],{"type":54,"value":212},"    assert LeagueInfo.format_info(data) == %{...}\n",{"type":40,"tag":88,"props":214,"children":216},{"class":90,"line":215},9,[217],{"type":40,"tag":88,"props":218,"children":219},{},[220],{"type":54,"value":124},{"type":40,"tag":88,"props":222,"children":224},{"class":90,"line":223},10,[225],{"type":40,"tag":88,"props":226,"children":227},{},[228],{"type":54,"value":133},{"type":40,"tag":50,"props":230,"children":231},{},[232,234,240,242,247],{"type":54,"value":233},"But running ",{"type":40,"tag":60,"props":235,"children":237},{"className":236},[],[238],{"type":54,"value":239},"mix test",{"type":54,"value":241}," would consistently give me the ",{"type":40,"tag":60,"props":243,"children":245},{"className":244},[],[246],{"type":54,"value":65},{"type":54,"value":248},".",{"type":40,"tag":67,"props":250,"children":252},{"id":251},"the-solution",[253],{"type":54,"value":254},"The Solution",{"type":40,"tag":50,"props":256,"children":257},{},[258,260,266,268,274],{"type":54,"value":259},"Most articles and threads mentioned moving the ",{"type":40,"tag":60,"props":261,"children":263},{"className":262},[],[264],{"type":54,"value":265},"LeagueInfoMocks",{"type":54,"value":267}," module in the ",{"type":40,"tag":60,"props":269,"children":271},{"className":270},[],[272],{"type":54,"value":273},"test/support/*",{"type":54,"value":275}," directory, so I did. This didn't change the error message.",{"type":40,"tag":50,"props":277,"children":278},{},[279,281,290,292,298],{"type":54,"value":280},"I eventually found ",{"type":40,"tag":282,"props":283,"children":287},"a",{"href":284,"rel":285},"https://stackoverflow.com/a/73967553/6642089",[286],"nofollow",[288],{"type":54,"value":289},"this",{"type":54,"value":291}," Stackoverflow comment that mentioned some configuration needed in the ",{"type":40,"tag":60,"props":293,"children":295},{"className":294},[],[296],{"type":54,"value":297},"mix.exs",{"type":54,"value":299}," file.",{"type":40,"tag":50,"props":301,"children":302},{},[303,305,311,313,318,320,325],{"type":54,"value":304},"Supposedly, ",{"type":40,"tag":60,"props":306,"children":308},{"className":307},[],[309],{"type":54,"value":310},"mix phx.new",{"type":54,"value":312}," adds the ",{"type":40,"tag":60,"props":314,"children":316},{"className":315},[],[317],{"type":54,"value":273},{"type":54,"value":319}," support when a Phoenix project is created. In my case, I'm building off of a simple Elixir application. This required me to configure my ",{"type":40,"tag":60,"props":321,"children":323},{"className":322},[],[324],{"type":54,"value":297},{"type":54,"value":326}," file to look like so:",{"type":40,"tag":79,"props":328,"children":330},{"className":81,"code":329,"language":33,"meta":6,"style":6},"defmodule LolesportsConsumer.MixProject do\n  use Mix.Project\n\n  def project do\n    [\n      app: :lolesports_consumer,\n      version: \"0.1.0\",\n      elixir: \"~> 1.15\",\n      start_permanent: Mix.env() == :prod,\n      deps: deps(),\n      elixirc_paths: elixirc_paths(Mix.env())\n    ]\n  end\n\n  # Run \"mix help compile.app\" to learn about applications.\n  def application do\n    [\n      extra_applications: [:logger]\n    ]\n  end\n\n  # Run \"mix help deps\" to learn about dependencies.\n  defp deps do\n    [\n      {:httpoison, \"~> 2.1\"},\n      {:jason, \"~> 1.4\"}\n    ]\n  end\n\n  defp elixirc_paths(:test), do: [\"lib\", \"test/support\"]\n  defp elixirc_paths(_), do: [\"lib\"]\nend\n\n",[331],{"type":40,"tag":60,"props":332,"children":333},{"__ignoreMap":6},[334,342,350,357,365,373,381,389,397,405,413,422,431,439,447,456,465,473,482,490,498,506,515,524,532,541,550,558,566,574,583,592],{"type":40,"tag":88,"props":335,"children":336},{"class":90,"line":91},[337],{"type":40,"tag":88,"props":338,"children":339},{},[340],{"type":54,"value":341},"defmodule LolesportsConsumer.MixProject do\n",{"type":40,"tag":88,"props":343,"children":344},{"class":90,"line":100},[345],{"type":40,"tag":88,"props":346,"children":347},{},[348],{"type":54,"value":349},"  use Mix.Project\n",{"type":40,"tag":88,"props":351,"children":352},{"class":90,"line":109},[353],{"type":40,"tag":88,"props":354,"children":355},{"emptyLinePlaceholder":183},[356],{"type":54,"value":186},{"type":40,"tag":88,"props":358,"children":359},{"class":90,"line":118},[360],{"type":40,"tag":88,"props":361,"children":362},{},[363],{"type":54,"value":364},"  def project do\n",{"type":40,"tag":88,"props":366,"children":367},{"class":90,"line":127},[368],{"type":40,"tag":88,"props":369,"children":370},{},[371],{"type":54,"value":372},"    [\n",{"type":40,"tag":88,"props":374,"children":375},{"class":90,"line":189},[376],{"type":40,"tag":88,"props":377,"children":378},{},[379],{"type":54,"value":380},"      app: :lolesports_consumer,\n",{"type":40,"tag":88,"props":382,"children":383},{"class":90,"line":198},[384],{"type":40,"tag":88,"props":385,"children":386},{},[387],{"type":54,"value":388},"      version: \"0.1.0\",\n",{"type":40,"tag":88,"props":390,"children":391},{"class":90,"line":206},[392],{"type":40,"tag":88,"props":393,"children":394},{},[395],{"type":54,"value":396},"      elixir: \"~> 1.15\",\n",{"type":40,"tag":88,"props":398,"children":399},{"class":90,"line":215},[400],{"type":40,"tag":88,"props":401,"children":402},{},[403],{"type":54,"value":404},"      start_permanent: Mix.env() == :prod,\n",{"type":40,"tag":88,"props":406,"children":407},{"class":90,"line":223},[408],{"type":40,"tag":88,"props":409,"children":410},{},[411],{"type":54,"value":412},"      deps: deps(),\n",{"type":40,"tag":88,"props":414,"children":416},{"class":90,"line":415},11,[417],{"type":40,"tag":88,"props":418,"children":419},{},[420],{"type":54,"value":421},"      elixirc_paths: elixirc_paths(Mix.env())\n",{"type":40,"tag":88,"props":423,"children":425},{"class":90,"line":424},12,[426],{"type":40,"tag":88,"props":427,"children":428},{},[429],{"type":54,"value":430},"    ]\n",{"type":40,"tag":88,"props":432,"children":434},{"class":90,"line":433},13,[435],{"type":40,"tag":88,"props":436,"children":437},{},[438],{"type":54,"value":124},{"type":40,"tag":88,"props":440,"children":442},{"class":90,"line":441},14,[443],{"type":40,"tag":88,"props":444,"children":445},{"emptyLinePlaceholder":183},[446],{"type":54,"value":186},{"type":40,"tag":88,"props":448,"children":450},{"class":90,"line":449},15,[451],{"type":40,"tag":88,"props":452,"children":453},{},[454],{"type":54,"value":455},"  # Run \"mix help compile.app\" to learn about applications.\n",{"type":40,"tag":88,"props":457,"children":459},{"class":90,"line":458},16,[460],{"type":40,"tag":88,"props":461,"children":462},{},[463],{"type":54,"value":464},"  def application do\n",{"type":40,"tag":88,"props":466,"children":468},{"class":90,"line":467},17,[469],{"type":40,"tag":88,"props":470,"children":471},{},[472],{"type":54,"value":372},{"type":40,"tag":88,"props":474,"children":476},{"class":90,"line":475},18,[477],{"type":40,"tag":88,"props":478,"children":479},{},[480],{"type":54,"value":481},"      extra_applications: [:logger]\n",{"type":40,"tag":88,"props":483,"children":485},{"class":90,"line":484},19,[486],{"type":40,"tag":88,"props":487,"children":488},{},[489],{"type":54,"value":430},{"type":40,"tag":88,"props":491,"children":493},{"class":90,"line":492},20,[494],{"type":40,"tag":88,"props":495,"children":496},{},[497],{"type":54,"value":124},{"type":40,"tag":88,"props":499,"children":501},{"class":90,"line":500},21,[502],{"type":40,"tag":88,"props":503,"children":504},{"emptyLinePlaceholder":183},[505],{"type":54,"value":186},{"type":40,"tag":88,"props":507,"children":509},{"class":90,"line":508},22,[510],{"type":40,"tag":88,"props":511,"children":512},{},[513],{"type":54,"value":514},"  # Run \"mix help deps\" to learn about dependencies.\n",{"type":40,"tag":88,"props":516,"children":518},{"class":90,"line":517},23,[519],{"type":40,"tag":88,"props":520,"children":521},{},[522],{"type":54,"value":523},"  defp deps do\n",{"type":40,"tag":88,"props":525,"children":527},{"class":90,"line":526},24,[528],{"type":40,"tag":88,"props":529,"children":530},{},[531],{"type":54,"value":372},{"type":40,"tag":88,"props":533,"children":535},{"class":90,"line":534},25,[536],{"type":40,"tag":88,"props":537,"children":538},{},[539],{"type":54,"value":540},"      {:httpoison, \"~> 2.1\"},\n",{"type":40,"tag":88,"props":542,"children":544},{"class":90,"line":543},26,[545],{"type":40,"tag":88,"props":546,"children":547},{},[548],{"type":54,"value":549},"      {:jason, \"~> 1.4\"}\n",{"type":40,"tag":88,"props":551,"children":553},{"class":90,"line":552},27,[554],{"type":40,"tag":88,"props":555,"children":556},{},[557],{"type":54,"value":430},{"type":40,"tag":88,"props":559,"children":561},{"class":90,"line":560},28,[562],{"type":40,"tag":88,"props":563,"children":564},{},[565],{"type":54,"value":124},{"type":40,"tag":88,"props":567,"children":569},{"class":90,"line":568},29,[570],{"type":40,"tag":88,"props":571,"children":572},{"emptyLinePlaceholder":183},[573],{"type":54,"value":186},{"type":40,"tag":88,"props":575,"children":577},{"class":90,"line":576},30,[578],{"type":40,"tag":88,"props":579,"children":580},{},[581],{"type":54,"value":582},"  defp elixirc_paths(:test), do: [\"lib\", \"test/support\"]\n",{"type":40,"tag":88,"props":584,"children":586},{"class":90,"line":585},31,[587],{"type":40,"tag":88,"props":588,"children":589},{},[590],{"type":54,"value":591},"  defp elixirc_paths(_), do: [\"lib\"]\n",{"type":40,"tag":88,"props":593,"children":595},{"class":90,"line":594},32,[596],{"type":40,"tag":88,"props":597,"children":598},{},[599],{"type":54,"value":133},{"type":40,"tag":50,"props":601,"children":602},{},[603],{"type":54,"value":604},"The key differences were:",{"type":40,"tag":606,"props":607,"children":608},"ol",{},[609,629],{"type":40,"tag":610,"props":611,"children":612},"li",{},[613,615,621,623],{"type":54,"value":614},"Adding ",{"type":40,"tag":60,"props":616,"children":618},{"className":617},[],[619],{"type":54,"value":620},"elixirc_paths: elixirc_paths(Mix.env())",{"type":54,"value":622}," to ",{"type":40,"tag":60,"props":624,"children":626},{"className":625},[],[627],{"type":54,"value":628},"project",{"type":40,"tag":610,"props":630,"children":631},{},[632,634],{"type":54,"value":633},"Adding these two lines to the file:\n",{"type":40,"tag":635,"props":636,"children":637},"ul",{},[638,647],{"type":40,"tag":610,"props":639,"children":640},{},[641],{"type":40,"tag":60,"props":642,"children":644},{"className":643},[],[645],{"type":54,"value":646},"defp elixirc_paths(:test), do: [\"lib\", \"test/support\"]",{"type":40,"tag":610,"props":648,"children":649},{},[650],{"type":40,"tag":60,"props":651,"children":653},{"className":652},[],[654],{"type":54,"value":655},"defp elixirc_paths(_), do: [\"lib\"]",{"type":40,"tag":67,"props":657,"children":659},{"id":658},"conclusion",[660],{"type":54,"value":661},"Conclusion",{"type":40,"tag":50,"props":663,"children":664},{},[665,667,673],{"type":54,"value":666},"With these configuration changes, I am able to properly call ",{"type":40,"tag":60,"props":668,"children":670},{"className":669},[],[671],{"type":54,"value":672},"LeagueInfoMocks.get_live()",{"type":54,"value":674}," and write tests against an expected HTTP response.",{"type":40,"tag":676,"props":677,"children":678},"style",{},[679],{"type":54,"value":680},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":6,"searchDepth":100,"depth":100,"links":682},[683,684,685],{"id":69,"depth":100,"text":72},{"id":251,"depth":100,"text":254},{"id":658,"depth":100,"text":661},"markdown","content:mocking-http-responses-in-elixir-and-phoenix.md","content","mocking-http-responses-in-elixir-and-phoenix.md","md",{"_path":692,"_dir":6,"_draft":7,"_partial":7,"_locale":6,"title":693,"description":694,"type":10,"author":695,"date":697,"category":698,"dropdown":699,"tags":700,"meta":704,"canonicalUrl":713,"topics":714,"body":715,"_type":686,"_id":2297,"_source":688,"_file":2298,"_stem":2299,"_extension":690},"/mocking-api-with-msw-and-typescript","Mocking an API request with Mock Service Worker and Typescript","Use mswjs - Mock Service Worker - to mock an API request to Medium's API within a Typescript project.",{"name":12,"image":696},"https://codybontecou.com/images/cody-abstract.jpeg","2020-07-25T00:00:00.000Z","tutorials","NodeJS",[701,702,703,701],"mswjs","Code","Automated Testing",[705,706,707,709,711,712],{"name":26,"content":693},{"name":19,"content":694},{"name":21,"content":708},"https://codybontecou.com/images/MSW-Meta.png",{"name":24,"content":710},"Illustration of a man with a baret waving his hands with Reddit and Typescript logos above him",{"name":28,"content":693},{"name":30,"content":693},"https://codybontecou.com/mocking-api-with-msw-and-typescript.html",[701,34,35],{"type":37,"children":716,"toc":2287},[717,722,731,745,750,755,767,773,787,801,807,819,832,837,1195,1200,1661,1708,1714,1728,1739,1752,1817,1823,1828,1840,1845,1850,2029,2034,2046,2107,2113,2118,2170,2180,2200,2253,2257,2262,2267,2271,2283],{"type":40,"tag":41,"props":718,"children":720},{"id":719},"mocking-an-api-request-with-mock-service-worker-and-typescript",[721],{"type":54,"value":693},{"type":40,"tag":723,"props":724,"children":725},"blockquote",{},[726],{"type":40,"tag":50,"props":727,"children":728},{},[729],{"type":54,"value":730},"Testing software is essential to the development cycle of building applications. A strong test suite gives the developer(s) a sense of freedom to organize and refactor the codebase as needed without fear of unknowingly breaking something.",{"type":40,"tag":50,"props":732,"children":733},{},[734,736,743],{"type":54,"value":735},"I'm using ",{"type":40,"tag":282,"props":737,"children":740},{"href":738,"rel":739},"https://github.com/CodyBontecou/blogflow.io/",[286],[741],{"type":54,"value":742},"Blogflow.io",{"type":54,"value":744}," as a means to learn Typescript while simultaneously building a tool to help automate distributing blog posts throughout the web.",{"type":40,"tag":50,"props":746,"children":747},{},[748],{"type":54,"value":749},"A large portion of this application requires integrating 3rd party APIs to communicate with services such as Medium, Hashnode, Reddit, etc.",{"type":40,"tag":50,"props":751,"children":752},{},[753],{"type":54,"value":754},"It's tough to test against 3rd party APIs. We don't want to hit their endpoints every time we run our test suite. Instead, we choose to mock the response, making the assumption that given specific inputs, they API will output a specific response.",{"type":40,"tag":50,"props":756,"children":757},{},[758,765],{"type":40,"tag":282,"props":759,"children":762},{"href":760,"rel":761},"https://mswjs.io/",[286],[763],{"type":54,"value":764},"Mock Service Worker (MSW)",{"type":54,"value":766}," provides a simple way to intercept these API calls so that our tests aren't hitting 3rd party endpoints and interacting with live data.",{"type":40,"tag":67,"props":768,"children":770},{"id":769},"setup-and-installation",[771],{"type":54,"value":772},"Setup and Installation",{"type":40,"tag":50,"props":774,"children":775},{},[776,778,785],{"type":54,"value":777},"I was going to walk you through setting MSW up but they provide such clear ",{"type":40,"tag":282,"props":779,"children":782},{"href":780,"rel":781},"https://mswjs.io/docs/getting-started/install",[286],[783],{"type":54,"value":784},"documentation",{"type":54,"value":786}," that I think doing anything besides linking you to them would be an injustice.",{"type":40,"tag":50,"props":788,"children":789},{},[790,792,799],{"type":54,"value":791},"You're welcome to view my ",{"type":40,"tag":282,"props":793,"children":796},{"href":794,"rel":795},"https://github.com/CodyBontecou/blogflow.io",[286],[797],{"type":54,"value":798},"repo",{"type":54,"value":800}," if you would like to see how I set it up in my project alongside packages like dotenv and Typescript.",{"type":40,"tag":67,"props":802,"children":804},{"id":803},"mocking-mediums-api",[805],{"type":54,"value":806},"Mocking Medium's API",{"type":40,"tag":50,"props":808,"children":809},{},[810,812,817],{"type":54,"value":811},"Everything below assumes you followed the ",{"type":40,"tag":282,"props":813,"children":815},{"href":814},"#installation",[816],{"type":54,"value":772},{"type":54,"value":818}," or have an understanding of MSW.",{"type":40,"tag":50,"props":820,"children":821},{},[822,824,831],{"type":54,"value":823},"In order to mock Medium's Create a Post request, I checked their API ",{"type":40,"tag":282,"props":825,"children":828},{"href":826,"rel":827},"https://github.com/Medium/medium-api-docs#32-publications",[286],[829],{"type":54,"value":830},"here",{"type":54,"value":248},{"type":40,"tag":50,"props":833,"children":834},{},[835],{"type":54,"value":836},"They provide an example response:",{"type":40,"tag":79,"props":838,"children":842},{"className":839,"code":840,"language":841,"meta":6,"style":6},"language-js shiki shiki-themes github-light","HTTP/1.1 201 OK\nContent-Type: application/json; charset=utf-8\n\n{\n  \"data\": {\n    \"id\": \"e6f36a\",\n    \"title\": \"Liverpool FC\",\n    \"authorId\": \"5303d74c64f66366f00cb9b2a94f3251bf5\",\n    \"tags\": [\"football\", \"sport\", \"Liverpool\"],\n    \"url\": \"https://medium.com/@majelbstoat/liverpool-fc-e6f36a\",\n    \"canonicalUrl\": \"http://jamietalbot.com/posts/liverpool-fc\",\n    \"publishStatus\": \"public\",\n    \"publishedAt\": 1442286338435,\n    \"license\": \"all-rights-reserved\",\n    \"licenseUrl\": \"https://medium.com/policy/9db0094a1e0f\"\n  }\n","js",[843],{"type":40,"tag":60,"props":844,"children":845},{"__ignoreMap":6},[846,876,929,936,944,958,981,1002,1023,1065,1086,1107,1128,1149,1170,1187],{"type":40,"tag":88,"props":847,"children":848},{"class":90,"line":91},[849,855,861,866,871],{"type":40,"tag":88,"props":850,"children":852},{"style":851},"--shiki-default:#005CC5",[853],{"type":54,"value":854},"HTTP",{"type":40,"tag":88,"props":856,"children":858},{"style":857},"--shiki-default:#D73A49",[859],{"type":54,"value":860},"/",{"type":40,"tag":88,"props":862,"children":863},{"style":851},[864],{"type":54,"value":865},"1.1",{"type":40,"tag":88,"props":867,"children":868},{"style":851},[869],{"type":54,"value":870}," 201",{"type":40,"tag":88,"props":872,"children":873},{"style":851},[874],{"type":54,"value":875}," OK\n",{"type":40,"tag":88,"props":877,"children":878},{"class":90,"line":100},[879,885,890,896,901,905,910,915,920,924],{"type":40,"tag":88,"props":880,"children":882},{"style":881},"--shiki-default:#24292E",[883],{"type":54,"value":884},"Content",{"type":40,"tag":88,"props":886,"children":887},{"style":857},[888],{"type":54,"value":889},"-",{"type":40,"tag":88,"props":891,"children":893},{"style":892},"--shiki-default:#6F42C1",[894],{"type":54,"value":895},"Type",{"type":40,"tag":88,"props":897,"children":898},{"style":881},[899],{"type":54,"value":900},": application",{"type":40,"tag":88,"props":902,"children":903},{"style":857},[904],{"type":54,"value":860},{"type":40,"tag":88,"props":906,"children":907},{"style":881},[908],{"type":54,"value":909},"json; charset",{"type":40,"tag":88,"props":911,"children":912},{"style":857},[913],{"type":54,"value":914},"=",{"type":40,"tag":88,"props":916,"children":917},{"style":881},[918],{"type":54,"value":919},"utf",{"type":40,"tag":88,"props":921,"children":922},{"style":857},[923],{"type":54,"value":889},{"type":40,"tag":88,"props":925,"children":926},{"style":851},[927],{"type":54,"value":928},"8\n",{"type":40,"tag":88,"props":930,"children":931},{"class":90,"line":109},[932],{"type":40,"tag":88,"props":933,"children":934},{"emptyLinePlaceholder":183},[935],{"type":54,"value":186},{"type":40,"tag":88,"props":937,"children":938},{"class":90,"line":118},[939],{"type":40,"tag":88,"props":940,"children":941},{"style":881},[942],{"type":54,"value":943},"{\n",{"type":40,"tag":88,"props":945,"children":946},{"class":90,"line":127},[947,953],{"type":40,"tag":88,"props":948,"children":950},{"style":949},"--shiki-default:#032F62",[951],{"type":54,"value":952},"  \"data\"",{"type":40,"tag":88,"props":954,"children":955},{"style":881},[956],{"type":54,"value":957},": {\n",{"type":40,"tag":88,"props":959,"children":960},{"class":90,"line":189},[961,966,971,976],{"type":40,"tag":88,"props":962,"children":963},{"style":949},[964],{"type":54,"value":965},"    \"id\"",{"type":40,"tag":88,"props":967,"children":968},{"style":881},[969],{"type":54,"value":970},": ",{"type":40,"tag":88,"props":972,"children":973},{"style":949},[974],{"type":54,"value":975},"\"e6f36a\"",{"type":40,"tag":88,"props":977,"children":978},{"style":881},[979],{"type":54,"value":980},",\n",{"type":40,"tag":88,"props":982,"children":983},{"class":90,"line":198},[984,989,993,998],{"type":40,"tag":88,"props":985,"children":986},{"style":949},[987],{"type":54,"value":988},"    \"title\"",{"type":40,"tag":88,"props":990,"children":991},{"style":881},[992],{"type":54,"value":970},{"type":40,"tag":88,"props":994,"children":995},{"style":949},[996],{"type":54,"value":997},"\"Liverpool FC\"",{"type":40,"tag":88,"props":999,"children":1000},{"style":881},[1001],{"type":54,"value":980},{"type":40,"tag":88,"props":1003,"children":1004},{"class":90,"line":206},[1005,1010,1014,1019],{"type":40,"tag":88,"props":1006,"children":1007},{"style":949},[1008],{"type":54,"value":1009},"    \"authorId\"",{"type":40,"tag":88,"props":1011,"children":1012},{"style":881},[1013],{"type":54,"value":970},{"type":40,"tag":88,"props":1015,"children":1016},{"style":949},[1017],{"type":54,"value":1018},"\"5303d74c64f66366f00cb9b2a94f3251bf5\"",{"type":40,"tag":88,"props":1020,"children":1021},{"style":881},[1022],{"type":54,"value":980},{"type":40,"tag":88,"props":1024,"children":1025},{"class":90,"line":215},[1026,1031,1036,1041,1046,1051,1055,1060],{"type":40,"tag":88,"props":1027,"children":1028},{"style":949},[1029],{"type":54,"value":1030},"    \"tags\"",{"type":40,"tag":88,"props":1032,"children":1033},{"style":881},[1034],{"type":54,"value":1035},": [",{"type":40,"tag":88,"props":1037,"children":1038},{"style":949},[1039],{"type":54,"value":1040},"\"football\"",{"type":40,"tag":88,"props":1042,"children":1043},{"style":881},[1044],{"type":54,"value":1045},", ",{"type":40,"tag":88,"props":1047,"children":1048},{"style":949},[1049],{"type":54,"value":1050},"\"sport\"",{"type":40,"tag":88,"props":1052,"children":1053},{"style":881},[1054],{"type":54,"value":1045},{"type":40,"tag":88,"props":1056,"children":1057},{"style":949},[1058],{"type":54,"value":1059},"\"Liverpool\"",{"type":40,"tag":88,"props":1061,"children":1062},{"style":881},[1063],{"type":54,"value":1064},"],\n",{"type":40,"tag":88,"props":1066,"children":1067},{"class":90,"line":223},[1068,1073,1077,1082],{"type":40,"tag":88,"props":1069,"children":1070},{"style":949},[1071],{"type":54,"value":1072},"    \"url\"",{"type":40,"tag":88,"props":1074,"children":1075},{"style":881},[1076],{"type":54,"value":970},{"type":40,"tag":88,"props":1078,"children":1079},{"style":949},[1080],{"type":54,"value":1081},"\"https://medium.com/@majelbstoat/liverpool-fc-e6f36a\"",{"type":40,"tag":88,"props":1083,"children":1084},{"style":881},[1085],{"type":54,"value":980},{"type":40,"tag":88,"props":1087,"children":1088},{"class":90,"line":415},[1089,1094,1098,1103],{"type":40,"tag":88,"props":1090,"children":1091},{"style":949},[1092],{"type":54,"value":1093},"    \"canonicalUrl\"",{"type":40,"tag":88,"props":1095,"children":1096},{"style":881},[1097],{"type":54,"value":970},{"type":40,"tag":88,"props":1099,"children":1100},{"style":949},[1101],{"type":54,"value":1102},"\"http://jamietalbot.com/posts/liverpool-fc\"",{"type":40,"tag":88,"props":1104,"children":1105},{"style":881},[1106],{"type":54,"value":980},{"type":40,"tag":88,"props":1108,"children":1109},{"class":90,"line":424},[1110,1115,1119,1124],{"type":40,"tag":88,"props":1111,"children":1112},{"style":949},[1113],{"type":54,"value":1114},"    \"publishStatus\"",{"type":40,"tag":88,"props":1116,"children":1117},{"style":881},[1118],{"type":54,"value":970},{"type":40,"tag":88,"props":1120,"children":1121},{"style":949},[1122],{"type":54,"value":1123},"\"public\"",{"type":40,"tag":88,"props":1125,"children":1126},{"style":881},[1127],{"type":54,"value":980},{"type":40,"tag":88,"props":1129,"children":1130},{"class":90,"line":433},[1131,1136,1140,1145],{"type":40,"tag":88,"props":1132,"children":1133},{"style":949},[1134],{"type":54,"value":1135},"    \"publishedAt\"",{"type":40,"tag":88,"props":1137,"children":1138},{"style":881},[1139],{"type":54,"value":970},{"type":40,"tag":88,"props":1141,"children":1142},{"style":851},[1143],{"type":54,"value":1144},"1442286338435",{"type":40,"tag":88,"props":1146,"children":1147},{"style":881},[1148],{"type":54,"value":980},{"type":40,"tag":88,"props":1150,"children":1151},{"class":90,"line":441},[1152,1157,1161,1166],{"type":40,"tag":88,"props":1153,"children":1154},{"style":949},[1155],{"type":54,"value":1156},"    \"license\"",{"type":40,"tag":88,"props":1158,"children":1159},{"style":881},[1160],{"type":54,"value":970},{"type":40,"tag":88,"props":1162,"children":1163},{"style":949},[1164],{"type":54,"value":1165},"\"all-rights-reserved\"",{"type":40,"tag":88,"props":1167,"children":1168},{"style":881},[1169],{"type":54,"value":980},{"type":40,"tag":88,"props":1171,"children":1172},{"class":90,"line":449},[1173,1178,1182],{"type":40,"tag":88,"props":1174,"children":1175},{"style":949},[1176],{"type":54,"value":1177},"    \"licenseUrl\"",{"type":40,"tag":88,"props":1179,"children":1180},{"style":881},[1181],{"type":54,"value":970},{"type":40,"tag":88,"props":1183,"children":1184},{"style":949},[1185],{"type":54,"value":1186},"\"https://medium.com/policy/9db0094a1e0f\"\n",{"type":40,"tag":88,"props":1188,"children":1189},{"class":90,"line":458},[1190],{"type":40,"tag":88,"props":1191,"children":1192},{"style":881},[1193],{"type":54,"value":1194},"  }\n",{"type":40,"tag":50,"props":1196,"children":1197},{},[1198],{"type":54,"value":1199},"Mocking this with MSW was simple. It was nearly a copy paste:",{"type":40,"tag":79,"props":1201,"children":1205},{"className":1202,"code":1203,"language":1204,"meta":6,"style":6},"language-ts shiki shiki-themes github-light","//  src/mocks/handlers.ts\n\nimport { rest } from 'msw'\n\nexport const handlers = [\n1. rest.post('https://api.medium.com/*', (req, res, ctx) => {\n    return res(\n2.    ctx.status(201),\n3.    ctx.json({\n        data: {\n          id: 'e6f36a',\n          title: 'Liverpool FC',\n          authorId: '5303d74c64f66366f00cb9b2a94f3251bf5',\n          tags: ['football', 'sport', 'Liverpool'],\n          url: 'https://medium.com/@majelbstoat/liverpool-fc-e6f36a',\n          canonicalUrl: 'http://jamietalbot.com/posts/liverpool-fc',\n          publishStatus: 'public',\n          publishedAt: 1442286338435,\n          license: 'all-rights-reserved',\n          licenseUrl: 'https://medium.com/policy/9db0094a1e0f',\n        },\n      })\n    )\n  }),\n]\n","ts",[1206],{"type":40,"tag":60,"props":1207,"children":1208},{"__ignoreMap":6},[1209,1218,1225,1248,1255,1283,1354,1372,1404,1426,1434,1451,1468,1485,1520,1537,1554,1571,1587,1604,1621,1629,1637,1645,1653],{"type":40,"tag":88,"props":1210,"children":1211},{"class":90,"line":91},[1212],{"type":40,"tag":88,"props":1213,"children":1215},{"style":1214},"--shiki-default:#6A737D",[1216],{"type":54,"value":1217},"//  src/mocks/handlers.ts\n",{"type":40,"tag":88,"props":1219,"children":1220},{"class":90,"line":100},[1221],{"type":40,"tag":88,"props":1222,"children":1223},{"emptyLinePlaceholder":183},[1224],{"type":54,"value":186},{"type":40,"tag":88,"props":1226,"children":1227},{"class":90,"line":109},[1228,1233,1238,1243],{"type":40,"tag":88,"props":1229,"children":1230},{"style":857},[1231],{"type":54,"value":1232},"import",{"type":40,"tag":88,"props":1234,"children":1235},{"style":881},[1236],{"type":54,"value":1237}," { rest } ",{"type":40,"tag":88,"props":1239,"children":1240},{"style":857},[1241],{"type":54,"value":1242},"from",{"type":40,"tag":88,"props":1244,"children":1245},{"style":949},[1246],{"type":54,"value":1247}," 'msw'\n",{"type":40,"tag":88,"props":1249,"children":1250},{"class":90,"line":118},[1251],{"type":40,"tag":88,"props":1252,"children":1253},{"emptyLinePlaceholder":183},[1254],{"type":54,"value":186},{"type":40,"tag":88,"props":1256,"children":1257},{"class":90,"line":127},[1258,1263,1268,1273,1278],{"type":40,"tag":88,"props":1259,"children":1260},{"style":857},[1261],{"type":54,"value":1262},"export",{"type":40,"tag":88,"props":1264,"children":1265},{"style":857},[1266],{"type":54,"value":1267}," const",{"type":40,"tag":88,"props":1269,"children":1270},{"style":851},[1271],{"type":54,"value":1272}," handlers",{"type":40,"tag":88,"props":1274,"children":1275},{"style":857},[1276],{"type":54,"value":1277}," =",{"type":40,"tag":88,"props":1279,"children":1280},{"style":881},[1281],{"type":54,"value":1282}," [\n",{"type":40,"tag":88,"props":1284,"children":1285},{"class":90,"line":189},[1286,1291,1296,1300,1305,1310,1315,1321,1325,1330,1334,1339,1344,1349],{"type":40,"tag":88,"props":1287,"children":1288},{"style":851},[1289],{"type":54,"value":1290},"1.",{"type":40,"tag":88,"props":1292,"children":1293},{"style":881},[1294],{"type":54,"value":1295}," rest.",{"type":40,"tag":88,"props":1297,"children":1298},{"style":892},[1299],{"type":54,"value":10},{"type":40,"tag":88,"props":1301,"children":1302},{"style":881},[1303],{"type":54,"value":1304},"(",{"type":40,"tag":88,"props":1306,"children":1307},{"style":949},[1308],{"type":54,"value":1309},"'https://api.medium.com/*'",{"type":40,"tag":88,"props":1311,"children":1312},{"style":881},[1313],{"type":54,"value":1314},", (",{"type":40,"tag":88,"props":1316,"children":1318},{"style":1317},"--shiki-default:#E36209",[1319],{"type":54,"value":1320},"req",{"type":40,"tag":88,"props":1322,"children":1323},{"style":881},[1324],{"type":54,"value":1045},{"type":40,"tag":88,"props":1326,"children":1327},{"style":1317},[1328],{"type":54,"value":1329},"res",{"type":40,"tag":88,"props":1331,"children":1332},{"style":881},[1333],{"type":54,"value":1045},{"type":40,"tag":88,"props":1335,"children":1336},{"style":1317},[1337],{"type":54,"value":1338},"ctx",{"type":40,"tag":88,"props":1340,"children":1341},{"style":881},[1342],{"type":54,"value":1343},") ",{"type":40,"tag":88,"props":1345,"children":1346},{"style":857},[1347],{"type":54,"value":1348},"=>",{"type":40,"tag":88,"props":1350,"children":1351},{"style":881},[1352],{"type":54,"value":1353}," {\n",{"type":40,"tag":88,"props":1355,"children":1356},{"class":90,"line":198},[1357,1362,1367],{"type":40,"tag":88,"props":1358,"children":1359},{"style":857},[1360],{"type":54,"value":1361},"    return",{"type":40,"tag":88,"props":1363,"children":1364},{"style":892},[1365],{"type":54,"value":1366}," res",{"type":40,"tag":88,"props":1368,"children":1369},{"style":881},[1370],{"type":54,"value":1371},"(\n",{"type":40,"tag":88,"props":1373,"children":1374},{"class":90,"line":206},[1375,1380,1385,1390,1394,1399],{"type":40,"tag":88,"props":1376,"children":1377},{"style":851},[1378],{"type":54,"value":1379},"2.",{"type":40,"tag":88,"props":1381,"children":1382},{"style":881},[1383],{"type":54,"value":1384},"    ctx.",{"type":40,"tag":88,"props":1386,"children":1387},{"style":892},[1388],{"type":54,"value":1389},"status",{"type":40,"tag":88,"props":1391,"children":1392},{"style":881},[1393],{"type":54,"value":1304},{"type":40,"tag":88,"props":1395,"children":1396},{"style":851},[1397],{"type":54,"value":1398},"201",{"type":40,"tag":88,"props":1400,"children":1401},{"style":881},[1402],{"type":54,"value":1403},"),\n",{"type":40,"tag":88,"props":1405,"children":1406},{"class":90,"line":215},[1407,1412,1416,1421],{"type":40,"tag":88,"props":1408,"children":1409},{"style":851},[1410],{"type":54,"value":1411},"3.",{"type":40,"tag":88,"props":1413,"children":1414},{"style":881},[1415],{"type":54,"value":1384},{"type":40,"tag":88,"props":1417,"children":1418},{"style":892},[1419],{"type":54,"value":1420},"json",{"type":40,"tag":88,"props":1422,"children":1423},{"style":881},[1424],{"type":54,"value":1425},"({\n",{"type":40,"tag":88,"props":1427,"children":1428},{"class":90,"line":223},[1429],{"type":40,"tag":88,"props":1430,"children":1431},{"style":881},[1432],{"type":54,"value":1433},"        data: {\n",{"type":40,"tag":88,"props":1435,"children":1436},{"class":90,"line":415},[1437,1442,1447],{"type":40,"tag":88,"props":1438,"children":1439},{"style":881},[1440],{"type":54,"value":1441},"          id: ",{"type":40,"tag":88,"props":1443,"children":1444},{"style":949},[1445],{"type":54,"value":1446},"'e6f36a'",{"type":40,"tag":88,"props":1448,"children":1449},{"style":881},[1450],{"type":54,"value":980},{"type":40,"tag":88,"props":1452,"children":1453},{"class":90,"line":424},[1454,1459,1464],{"type":40,"tag":88,"props":1455,"children":1456},{"style":881},[1457],{"type":54,"value":1458},"          title: ",{"type":40,"tag":88,"props":1460,"children":1461},{"style":949},[1462],{"type":54,"value":1463},"'Liverpool FC'",{"type":40,"tag":88,"props":1465,"children":1466},{"style":881},[1467],{"type":54,"value":980},{"type":40,"tag":88,"props":1469,"children":1470},{"class":90,"line":433},[1471,1476,1481],{"type":40,"tag":88,"props":1472,"children":1473},{"style":881},[1474],{"type":54,"value":1475},"          authorId: ",{"type":40,"tag":88,"props":1477,"children":1478},{"style":949},[1479],{"type":54,"value":1480},"'5303d74c64f66366f00cb9b2a94f3251bf5'",{"type":40,"tag":88,"props":1482,"children":1483},{"style":881},[1484],{"type":54,"value":980},{"type":40,"tag":88,"props":1486,"children":1487},{"class":90,"line":441},[1488,1493,1498,1502,1507,1511,1516],{"type":40,"tag":88,"props":1489,"children":1490},{"style":881},[1491],{"type":54,"value":1492},"          tags: [",{"type":40,"tag":88,"props":1494,"children":1495},{"style":949},[1496],{"type":54,"value":1497},"'football'",{"type":40,"tag":88,"props":1499,"children":1500},{"style":881},[1501],{"type":54,"value":1045},{"type":40,"tag":88,"props":1503,"children":1504},{"style":949},[1505],{"type":54,"value":1506},"'sport'",{"type":40,"tag":88,"props":1508,"children":1509},{"style":881},[1510],{"type":54,"value":1045},{"type":40,"tag":88,"props":1512,"children":1513},{"style":949},[1514],{"type":54,"value":1515},"'Liverpool'",{"type":40,"tag":88,"props":1517,"children":1518},{"style":881},[1519],{"type":54,"value":1064},{"type":40,"tag":88,"props":1521,"children":1522},{"class":90,"line":449},[1523,1528,1533],{"type":40,"tag":88,"props":1524,"children":1525},{"style":881},[1526],{"type":54,"value":1527},"          url: ",{"type":40,"tag":88,"props":1529,"children":1530},{"style":949},[1531],{"type":54,"value":1532},"'https://medium.com/@majelbstoat/liverpool-fc-e6f36a'",{"type":40,"tag":88,"props":1534,"children":1535},{"style":881},[1536],{"type":54,"value":980},{"type":40,"tag":88,"props":1538,"children":1539},{"class":90,"line":458},[1540,1545,1550],{"type":40,"tag":88,"props":1541,"children":1542},{"style":881},[1543],{"type":54,"value":1544},"          canonicalUrl: ",{"type":40,"tag":88,"props":1546,"children":1547},{"style":949},[1548],{"type":54,"value":1549},"'http://jamietalbot.com/posts/liverpool-fc'",{"type":40,"tag":88,"props":1551,"children":1552},{"style":881},[1553],{"type":54,"value":980},{"type":40,"tag":88,"props":1555,"children":1556},{"class":90,"line":467},[1557,1562,1567],{"type":40,"tag":88,"props":1558,"children":1559},{"style":881},[1560],{"type":54,"value":1561},"          publishStatus: ",{"type":40,"tag":88,"props":1563,"children":1564},{"style":949},[1565],{"type":54,"value":1566},"'public'",{"type":40,"tag":88,"props":1568,"children":1569},{"style":881},[1570],{"type":54,"value":980},{"type":40,"tag":88,"props":1572,"children":1573},{"class":90,"line":475},[1574,1579,1583],{"type":40,"tag":88,"props":1575,"children":1576},{"style":881},[1577],{"type":54,"value":1578},"          publishedAt: ",{"type":40,"tag":88,"props":1580,"children":1581},{"style":851},[1582],{"type":54,"value":1144},{"type":40,"tag":88,"props":1584,"children":1585},{"style":881},[1586],{"type":54,"value":980},{"type":40,"tag":88,"props":1588,"children":1589},{"class":90,"line":484},[1590,1595,1600],{"type":40,"tag":88,"props":1591,"children":1592},{"style":881},[1593],{"type":54,"value":1594},"          license: ",{"type":40,"tag":88,"props":1596,"children":1597},{"style":949},[1598],{"type":54,"value":1599},"'all-rights-reserved'",{"type":40,"tag":88,"props":1601,"children":1602},{"style":881},[1603],{"type":54,"value":980},{"type":40,"tag":88,"props":1605,"children":1606},{"class":90,"line":492},[1607,1612,1617],{"type":40,"tag":88,"props":1608,"children":1609},{"style":881},[1610],{"type":54,"value":1611},"          licenseUrl: ",{"type":40,"tag":88,"props":1613,"children":1614},{"style":949},[1615],{"type":54,"value":1616},"'https://medium.com/policy/9db0094a1e0f'",{"type":40,"tag":88,"props":1618,"children":1619},{"style":881},[1620],{"type":54,"value":980},{"type":40,"tag":88,"props":1622,"children":1623},{"class":90,"line":500},[1624],{"type":40,"tag":88,"props":1625,"children":1626},{"style":881},[1627],{"type":54,"value":1628},"        },\n",{"type":40,"tag":88,"props":1630,"children":1631},{"class":90,"line":508},[1632],{"type":40,"tag":88,"props":1633,"children":1634},{"style":881},[1635],{"type":54,"value":1636},"      })\n",{"type":40,"tag":88,"props":1638,"children":1639},{"class":90,"line":517},[1640],{"type":40,"tag":88,"props":1641,"children":1642},{"style":881},[1643],{"type":54,"value":1644},"    )\n",{"type":40,"tag":88,"props":1646,"children":1647},{"class":90,"line":526},[1648],{"type":40,"tag":88,"props":1649,"children":1650},{"style":881},[1651],{"type":54,"value":1652},"  }),\n",{"type":40,"tag":88,"props":1654,"children":1655},{"class":90,"line":534},[1656],{"type":40,"tag":88,"props":1657,"children":1658},{"style":881},[1659],{"type":54,"value":1660},"]\n",{"type":40,"tag":606,"props":1662,"children":1663},{},[1664,1698,1703],{"type":40,"tag":610,"props":1665,"children":1666},{},[1667,1669,1675,1676,1680,1682,1688,1690,1696],{"type":54,"value":1668},"I set this handler to intercept POST requests to any URL that starts with ",{"type":40,"tag":60,"props":1670,"children":1672},{"className":1671},[],[1673],{"type":54,"value":1674},"https://api.medium.com/*",{"type":54,"value":248},{"type":40,"tag":1677,"props":1678,"children":1679},"br",{},[],{"type":54,"value":1681},"The ",{"type":40,"tag":60,"props":1683,"children":1685},{"className":1684},[],[1686],{"type":54,"value":1687},"*",{"type":54,"value":1689}," represents a wildcard meaning anytime my application attempts to send a POST request to a URL starting with ",{"type":40,"tag":282,"props":1691,"children":1694},{"href":1692,"rel":1693},"https://api.medium.com/",[286],[1695],{"type":54,"value":1692},{"type":54,"value":1697},", it will intercept it and return the provided response at 3.",{"type":40,"tag":610,"props":1699,"children":1700},{},[1701],{"type":54,"value":1702},"We are setting the HTTP response status code we'd like to test against.",{"type":40,"tag":610,"props":1704,"children":1705},{},[1706],{"type":54,"value":1707},"This is where we define the JSON response that we wish to be returned from the POST request.",{"type":40,"tag":67,"props":1709,"children":1711},{"id":1710},"edge-cases",[1712],{"type":54,"value":1713},"Edge cases",{"type":40,"tag":50,"props":1715,"children":1716},{},[1717,1719,1726],{"type":54,"value":1718},"Certain packages require additional configuration. These are primarily ",{"type":40,"tag":282,"props":1720,"children":1723},{"href":1721,"rel":1722},"https://jestjs.io/",[286],[1724],{"type":54,"value":1725},"jest",{"type":54,"value":1727}," issues rather than MSW, but I ran into them while setting this up. I decided to document it incase anyone else runs into these issues like I did.",{"type":40,"tag":1729,"props":1730,"children":1732},"h3",{"id":1731},"dotenv",[1733],{"type":40,"tag":282,"props":1734,"children":1737},{"href":1735,"rel":1736},"https://github.com/motdotla/dotenv",[286],[1738],{"type":54,"value":1731},{"type":40,"tag":50,"props":1740,"children":1741},{},[1742,1744,1750],{"type":54,"value":1743},"Within your ",{"type":40,"tag":60,"props":1745,"children":1747},{"className":1746},[],[1748],{"type":54,"value":1749},"jest.config.ts",{"type":54,"value":1751}," file, make sure you have the following:",{"type":40,"tag":79,"props":1753,"children":1755},{"className":839,"code":1754,"language":841,"meta":6,"style":6},"// jest.config.ts\nmodule.exports = {\n  setupFiles: ['dotenv/config'],\n}\n",[1756],{"type":40,"tag":60,"props":1757,"children":1758},{"__ignoreMap":6},[1759,1767,1792,1809],{"type":40,"tag":88,"props":1760,"children":1761},{"class":90,"line":91},[1762],{"type":40,"tag":88,"props":1763,"children":1764},{"style":1214},[1765],{"type":54,"value":1766},"// jest.config.ts\n",{"type":40,"tag":88,"props":1768,"children":1769},{"class":90,"line":100},[1770,1775,1779,1784,1788],{"type":40,"tag":88,"props":1771,"children":1772},{"style":851},[1773],{"type":54,"value":1774},"module",{"type":40,"tag":88,"props":1776,"children":1777},{"style":881},[1778],{"type":54,"value":248},{"type":40,"tag":88,"props":1780,"children":1781},{"style":851},[1782],{"type":54,"value":1783},"exports",{"type":40,"tag":88,"props":1785,"children":1786},{"style":857},[1787],{"type":54,"value":1277},{"type":40,"tag":88,"props":1789,"children":1790},{"style":881},[1791],{"type":54,"value":1353},{"type":40,"tag":88,"props":1793,"children":1794},{"class":90,"line":109},[1795,1800,1805],{"type":40,"tag":88,"props":1796,"children":1797},{"style":881},[1798],{"type":54,"value":1799},"  setupFiles: [",{"type":40,"tag":88,"props":1801,"children":1802},{"style":949},[1803],{"type":54,"value":1804},"'dotenv/config'",{"type":40,"tag":88,"props":1806,"children":1807},{"style":881},[1808],{"type":54,"value":1064},{"type":40,"tag":88,"props":1810,"children":1811},{"class":90,"line":118},[1812],{"type":40,"tag":88,"props":1813,"children":1814},{"style":881},[1815],{"type":54,"value":1816},"}\n",{"type":40,"tag":1729,"props":1818,"children":1820},{"id":1819},"setuptests-file",[1821],{"type":54,"value":1822},"setupTests file",{"type":40,"tag":50,"props":1824,"children":1825},{},[1826],{"type":54,"value":1827},"You'll need to set up your jest tests to listen, reset, and close the MSW server.",{"type":40,"tag":50,"props":1829,"children":1830},{},[1831,1833,1839],{"type":54,"value":1832},"If you use Create React App, you may already have a file named ",{"type":40,"tag":60,"props":1834,"children":1836},{"className":1835},[],[1837],{"type":54,"value":1838},"src/setupTests.js",{"type":54,"value":248},{"type":40,"tag":50,"props":1841,"children":1842},{},[1843],{"type":54,"value":1844},"Otherwise, you'll need to create a setup file yourself.",{"type":40,"tag":50,"props":1846,"children":1847},{},[1848],{"type":54,"value":1849},"Then, add in the following code:",{"type":40,"tag":79,"props":1851,"children":1853},{"className":1202,"code":1852,"language":1204,"meta":6,"style":6},"// src/setupTests.js\nimport { server } from './mocks/server.js'\n\n// Establish API mocking before all tests.\nbeforeAll(() => server.listen())\n\n// Reset any request handlers that we may add during the tests,\n// so they don't affect other tests.\nafterEach(() => server.resetHandlers())\n\n// Clean up after the tests are finished.\nafterAll(() => server.close())\n",[1854],{"type":40,"tag":60,"props":1855,"children":1856},{"__ignoreMap":6},[1857,1865,1886,1893,1901,1933,1940,1948,1956,1985,1992,2000],{"type":40,"tag":88,"props":1858,"children":1859},{"class":90,"line":91},[1860],{"type":40,"tag":88,"props":1861,"children":1862},{"style":1214},[1863],{"type":54,"value":1864},"// src/setupTests.js\n",{"type":40,"tag":88,"props":1866,"children":1867},{"class":90,"line":100},[1868,1872,1877,1881],{"type":40,"tag":88,"props":1869,"children":1870},{"style":857},[1871],{"type":54,"value":1232},{"type":40,"tag":88,"props":1873,"children":1874},{"style":881},[1875],{"type":54,"value":1876}," { server } ",{"type":40,"tag":88,"props":1878,"children":1879},{"style":857},[1880],{"type":54,"value":1242},{"type":40,"tag":88,"props":1882,"children":1883},{"style":949},[1884],{"type":54,"value":1885}," './mocks/server.js'\n",{"type":40,"tag":88,"props":1887,"children":1888},{"class":90,"line":109},[1889],{"type":40,"tag":88,"props":1890,"children":1891},{"emptyLinePlaceholder":183},[1892],{"type":54,"value":186},{"type":40,"tag":88,"props":1894,"children":1895},{"class":90,"line":118},[1896],{"type":40,"tag":88,"props":1897,"children":1898},{"style":1214},[1899],{"type":54,"value":1900},"// Establish API mocking before all tests.\n",{"type":40,"tag":88,"props":1902,"children":1903},{"class":90,"line":127},[1904,1909,1914,1918,1923,1928],{"type":40,"tag":88,"props":1905,"children":1906},{"style":892},[1907],{"type":54,"value":1908},"beforeAll",{"type":40,"tag":88,"props":1910,"children":1911},{"style":881},[1912],{"type":54,"value":1913},"(() ",{"type":40,"tag":88,"props":1915,"children":1916},{"style":857},[1917],{"type":54,"value":1348},{"type":40,"tag":88,"props":1919,"children":1920},{"style":881},[1921],{"type":54,"value":1922}," server.",{"type":40,"tag":88,"props":1924,"children":1925},{"style":892},[1926],{"type":54,"value":1927},"listen",{"type":40,"tag":88,"props":1929,"children":1930},{"style":881},[1931],{"type":54,"value":1932},"())\n",{"type":40,"tag":88,"props":1934,"children":1935},{"class":90,"line":189},[1936],{"type":40,"tag":88,"props":1937,"children":1938},{"emptyLinePlaceholder":183},[1939],{"type":54,"value":186},{"type":40,"tag":88,"props":1941,"children":1942},{"class":90,"line":198},[1943],{"type":40,"tag":88,"props":1944,"children":1945},{"style":1214},[1946],{"type":54,"value":1947},"// Reset any request handlers that we may add during the tests,\n",{"type":40,"tag":88,"props":1949,"children":1950},{"class":90,"line":206},[1951],{"type":40,"tag":88,"props":1952,"children":1953},{"style":1214},[1954],{"type":54,"value":1955},"// so they don't affect other tests.\n",{"type":40,"tag":88,"props":1957,"children":1958},{"class":90,"line":215},[1959,1964,1968,1972,1976,1981],{"type":40,"tag":88,"props":1960,"children":1961},{"style":892},[1962],{"type":54,"value":1963},"afterEach",{"type":40,"tag":88,"props":1965,"children":1966},{"style":881},[1967],{"type":54,"value":1913},{"type":40,"tag":88,"props":1969,"children":1970},{"style":857},[1971],{"type":54,"value":1348},{"type":40,"tag":88,"props":1973,"children":1974},{"style":881},[1975],{"type":54,"value":1922},{"type":40,"tag":88,"props":1977,"children":1978},{"style":892},[1979],{"type":54,"value":1980},"resetHandlers",{"type":40,"tag":88,"props":1982,"children":1983},{"style":881},[1984],{"type":54,"value":1932},{"type":40,"tag":88,"props":1986,"children":1987},{"class":90,"line":223},[1988],{"type":40,"tag":88,"props":1989,"children":1990},{"emptyLinePlaceholder":183},[1991],{"type":54,"value":186},{"type":40,"tag":88,"props":1993,"children":1994},{"class":90,"line":415},[1995],{"type":40,"tag":88,"props":1996,"children":1997},{"style":1214},[1998],{"type":54,"value":1999},"// Clean up after the tests are finished.\n",{"type":40,"tag":88,"props":2001,"children":2002},{"class":90,"line":424},[2003,2008,2012,2016,2020,2025],{"type":40,"tag":88,"props":2004,"children":2005},{"style":892},[2006],{"type":54,"value":2007},"afterAll",{"type":40,"tag":88,"props":2009,"children":2010},{"style":881},[2011],{"type":54,"value":1913},{"type":40,"tag":88,"props":2013,"children":2014},{"style":857},[2015],{"type":54,"value":1348},{"type":40,"tag":88,"props":2017,"children":2018},{"style":881},[2019],{"type":54,"value":1922},{"type":40,"tag":88,"props":2021,"children":2022},{"style":892},[2023],{"type":54,"value":2024},"close",{"type":40,"tag":88,"props":2026,"children":2027},{"style":881},[2028],{"type":54,"value":1932},{"type":40,"tag":50,"props":2030,"children":2031},{},[2032],{"type":54,"value":2033},"This sets your Jest testing environment up to start the MSW server, reset it, and close it after different stages of the Jest lifecycle.",{"type":40,"tag":50,"props":2035,"children":2036},{},[2037,2039,2044],{"type":54,"value":2038},"You'll then want to add a line to your ",{"type":40,"tag":60,"props":2040,"children":2042},{"className":2041},[],[2043],{"type":54,"value":1749},{"type":54,"value":2045}," file:",{"type":40,"tag":79,"props":2047,"children":2049},{"className":1202,"code":2048,"language":1204,"meta":6,"style":6},"// jest.config.ts\nmodule.exports = {\n  setupFilesAfterEnv: ['\u003CrootDir>/src/setupTests.ts'],\n}\n",[2050],{"type":40,"tag":60,"props":2051,"children":2052},{"__ignoreMap":6},[2053,2060,2083,2100],{"type":40,"tag":88,"props":2054,"children":2055},{"class":90,"line":91},[2056],{"type":40,"tag":88,"props":2057,"children":2058},{"style":1214},[2059],{"type":54,"value":1766},{"type":40,"tag":88,"props":2061,"children":2062},{"class":90,"line":100},[2063,2067,2071,2075,2079],{"type":40,"tag":88,"props":2064,"children":2065},{"style":851},[2066],{"type":54,"value":1774},{"type":40,"tag":88,"props":2068,"children":2069},{"style":881},[2070],{"type":54,"value":248},{"type":40,"tag":88,"props":2072,"children":2073},{"style":851},[2074],{"type":54,"value":1783},{"type":40,"tag":88,"props":2076,"children":2077},{"style":857},[2078],{"type":54,"value":1277},{"type":40,"tag":88,"props":2080,"children":2081},{"style":881},[2082],{"type":54,"value":1353},{"type":40,"tag":88,"props":2084,"children":2085},{"class":90,"line":109},[2086,2091,2096],{"type":40,"tag":88,"props":2087,"children":2088},{"style":881},[2089],{"type":54,"value":2090},"  setupFilesAfterEnv: [",{"type":40,"tag":88,"props":2092,"children":2093},{"style":949},[2094],{"type":54,"value":2095},"'\u003CrootDir>/src/setupTests.ts'",{"type":40,"tag":88,"props":2097,"children":2098},{"style":881},[2099],{"type":54,"value":1064},{"type":40,"tag":88,"props":2101,"children":2102},{"class":90,"line":118},[2103],{"type":40,"tag":88,"props":2104,"children":2105},{"style":881},[2106],{"type":54,"value":1816},{"type":40,"tag":1729,"props":2108,"children":2110},{"id":2109},"error-enoent-no-such-file-or-directory-open-file",[2111],{"type":54,"value":2112},"Error: ENOENT: no such file or directory, open \"file\"",{"type":40,"tag":50,"props":2114,"children":2115},{},[2116],{"type":54,"value":2117},"I'm reading markdown files in Blogflow. Before writing my tests, I was using relative paths like so:",{"type":40,"tag":79,"props":2119,"children":2121},{"className":839,"code":2120,"language":841,"meta":6,"style":6},"const data = matter(readFile('./file.md'))\n",[2122],{"type":40,"tag":60,"props":2123,"children":2124},{"__ignoreMap":6},[2125],{"type":40,"tag":88,"props":2126,"children":2127},{"class":90,"line":91},[2128,2133,2138,2142,2147,2151,2156,2160,2165],{"type":40,"tag":88,"props":2129,"children":2130},{"style":857},[2131],{"type":54,"value":2132},"const",{"type":40,"tag":88,"props":2134,"children":2135},{"style":851},[2136],{"type":54,"value":2137}," data",{"type":40,"tag":88,"props":2139,"children":2140},{"style":857},[2141],{"type":54,"value":1277},{"type":40,"tag":88,"props":2143,"children":2144},{"style":892},[2145],{"type":54,"value":2146}," matter",{"type":40,"tag":88,"props":2148,"children":2149},{"style":881},[2150],{"type":54,"value":1304},{"type":40,"tag":88,"props":2152,"children":2153},{"style":892},[2154],{"type":54,"value":2155},"readFile",{"type":40,"tag":88,"props":2157,"children":2158},{"style":881},[2159],{"type":54,"value":1304},{"type":40,"tag":88,"props":2161,"children":2162},{"style":949},[2163],{"type":54,"value":2164},"'./file.md'",{"type":40,"tag":88,"props":2166,"children":2167},{"style":881},[2168],{"type":54,"value":2169},"))\n",{"type":40,"tag":50,"props":2171,"children":2172},{},[2173,2175],{"type":54,"value":2174},"My tests didn't like that and threw the error ",{"type":40,"tag":60,"props":2176,"children":2178},{"className":2177},[],[2179],{"type":54,"value":2112},{"type":40,"tag":50,"props":2181,"children":2182},{},[2183,2190,2192,2198],{"type":40,"tag":282,"props":2184,"children":2187},{"href":2185,"rel":2186},"https://stackoverflow.com/a/59179782/6642089",[286],[2188],{"type":54,"value":2189},"This",{"type":54,"value":2191}," Stackoverflow post explained I needed to use ",{"type":40,"tag":60,"props":2193,"children":2195},{"className":2194},[],[2196],{"type":54,"value":2197},"_dirname",{"type":54,"value":2199},". This code now looks like the snippet below. Now my tests and code run as expected.",{"type":40,"tag":79,"props":2201,"children":2203},{"className":839,"code":2202,"language":841,"meta":6,"style":6},"const data = matter(readFile(__dirname + '/file.md'))\n",[2204],{"type":40,"tag":60,"props":2205,"children":2206},{"__ignoreMap":6},[2207],{"type":40,"tag":88,"props":2208,"children":2209},{"class":90,"line":91},[2210,2214,2218,2222,2226,2230,2234,2239,2244,2249],{"type":40,"tag":88,"props":2211,"children":2212},{"style":857},[2213],{"type":54,"value":2132},{"type":40,"tag":88,"props":2215,"children":2216},{"style":851},[2217],{"type":54,"value":2137},{"type":40,"tag":88,"props":2219,"children":2220},{"style":857},[2221],{"type":54,"value":1277},{"type":40,"tag":88,"props":2223,"children":2224},{"style":892},[2225],{"type":54,"value":2146},{"type":40,"tag":88,"props":2227,"children":2228},{"style":881},[2229],{"type":54,"value":1304},{"type":40,"tag":88,"props":2231,"children":2232},{"style":892},[2233],{"type":54,"value":2155},{"type":40,"tag":88,"props":2235,"children":2236},{"style":881},[2237],{"type":54,"value":2238},"(__dirname ",{"type":40,"tag":88,"props":2240,"children":2241},{"style":857},[2242],{"type":54,"value":2243},"+",{"type":40,"tag":88,"props":2245,"children":2246},{"style":949},[2247],{"type":54,"value":2248}," '/file.md'",{"type":40,"tag":88,"props":2250,"children":2251},{"style":881},[2252],{"type":54,"value":2169},{"type":40,"tag":67,"props":2254,"children":2255},{"id":658},[2256],{"type":54,"value":661},{"type":40,"tag":50,"props":2258,"children":2259},{},[2260],{"type":54,"value":2261},"This is all fairly new to me, but I believe there is value in this sort of testing.",{"type":40,"tag":50,"props":2263,"children":2264},{},[2265],{"type":54,"value":2266},"One immediate case is mocking response's that are loaded into components. It's tough to get every state through live data. It's much easier to mock certain HTTP status codes and response objects that will change the way a component is rendered.",{"type":40,"tag":2268,"props":2269,"children":2270},"hr",{},[],{"type":40,"tag":50,"props":2272,"children":2273},{},[2274,2276],{"type":54,"value":2275},"I hope this article was helpful. Let me know if you have any questions, comments, or suggestions on Twitter ",{"type":40,"tag":282,"props":2277,"children":2280},{"href":2278,"rel":2279},"https://twitter.com/CodyBontecou",[286],[2281],{"type":54,"value":2282},"@codybontecou",{"type":40,"tag":676,"props":2284,"children":2285},{},[2286],{"type":54,"value":680},{"title":6,"searchDepth":100,"depth":100,"links":2288},[2289,2290,2291,2296],{"id":769,"depth":100,"text":772},{"id":803,"depth":100,"text":806},{"id":1710,"depth":100,"text":1713,"children":2292},[2293,2294,2295],{"id":1731,"depth":109,"text":1731},{"id":1819,"depth":109,"text":1822},{"id":2109,"depth":109,"text":2112},{"id":658,"depth":100,"text":661},"content:mocking-api-with-msw-and-typescript.md","mocking-api-with-msw-and-typescript.md","mocking-api-with-msw-and-typescript",1730672508014]