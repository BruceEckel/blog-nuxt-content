[{"_path":"/generate-twitter-lists-with-python","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Generating Twitter Lists with Python","description":null,"type":"post","author":{"name":"Cody Bontecou","image":"https://codybontecou.com/images/cody-abstract.jpeg"},"date":"2020-09-15","category":"tutorials","dropdown":"Python","topics":["python","tweepy","twitter","automation"],"meta":[{"name":"og:title","content":"Generating Twitter Lists with Python"},{"name":"og:description","content":"Automatically generating a Twitter List of Paul Grahams feed with Python and Tweepy"},{"name":"og:image","content":"https://codybontecou.com/images/generate-twitter-lists-with-python-meta.png"},{"name":"og:image:alt","content":"Automatically generating a Twitter List of Paul Grahams feed with Python and Tweepy"},{"name":"twitter:title","content":"Generating Twitter Lists with Python"},{"name":"twitter:text:title","content":"Generating a Twitter List with Python"}],"canonicalUrl":"https://codybontecou.com/generate-twitter-lists-with-python.html","newsletter":false,"created_at":"2024-10-31T14:26","last_modified":"2024-11-09T21:19","body":{"type":"root","children":[{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The finished project can be seen "},{"type":"element","tag":"a","props":{"href":"https://github.com/CodyBontecou/Generating-Twitter-Lists-with-Python/blob/main/tweepy_lists/app.py","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://twitter.com/paulg","rel":["nofollow"]},"children":[{"type":"text","value":"Paul Graham"}]},{"type":"text","value":" is an influential man in the tech and startup space."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"His Twitter activity keeps me entertained and informed, spanning from discussions about "},{"type":"element","tag":"a","props":{"href":"https://twitter.com/paulg/status/1437423926980841472","rel":["nofollow"]},"children":[{"type":"text","value":"air quality significantly impacting life expectancy"}]},{"type":"text","value":" to interesting "},{"type":"element","tag":"a","props":{"href":"https://twitter.com/paulg/status/1437453828606070784","rel":["nofollow"]},"children":[{"type":"text","value":"discussions he has with his kids"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The air pollution discussion this morning motivated me to want to see his feed and all of the interesting things a man like Paul sees. I started to follow the accounts he follows and after about 30 or so clicks I decided to investigate Twitter's API for a way to automate this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is where I discovered "},{"type":"element","tag":"a","props":{"href":"https://help.twitter.com/en/using-twitter/twitter-lists","rel":["nofollow"]},"children":[{"type":"text","value":"Twitter Lists"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"twitter-lists-are-a-great-way-to-create-custom-feeds"},"children":[{"type":"text","value":"Twitter Lists are a great way to create custom feeds"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Viewing a List timeline will show you a stream of Tweets from only the accounts on that List."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Twitter Lists are the perfect solution. It gives me the ability to create custom feeds."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If I feel like delving into Paul Grahams feed, it's a click away. Same with Elon Musk or any of the other influential users on Twitter."}]},{"type":"element","tag":"h2","props":{"id":"using-tweepy-to-automatically-generate-our-twitter-lists"},"children":[{"type":"text","value":"Using Tweepy to automatically generate our Twitter Lists"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.tweepy.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Tweepy"}]},{"type":"text","value":" is an easy-to-use Python library for accessing the Twitter API."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tweepy provides built in methods to easily interact with the Twitter API."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this project, I use the following from Tweepy:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/stable/api.html?highlight=API#API","rel":["nofollow"]},"children":[{"type":"text","value":"API class"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/client.html","rel":["nofollow"]},"children":[{"type":"text","value":"Client class"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/api.html?highlight=create_list#tweepy.API.create_list","rel":["nofollow"]},"children":[{"type":"text","value":".create_list()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/v3.10.0/api.html?highlight=get_user#API.get_user","rel":["nofollow"]},"children":[{"type":"text","value":".get_user()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/client.html?highlight=get_users_following#tweepy.client.get_users_following","rel":["nofollow"]},"children":[{"type":"text","value":".get_users_following()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/api.html?highlight=add_list_members#tweepy.api.add_list_members","rel":["nofollow"]},"children":[{"type":"text","value":".add_list_members"}]}]}]},{"type":"element","tag":"h2","props":{"id":"authenticating-with-twitters-api-using-tweepy"},"children":[{"type":"text","value":"Authenticating with Twitter's API using Tweepy"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This tutorial will assume you already have a Twitter developer account. If you do not, I went into detail "},{"type":"element","tag":"a","props":{"href":"https://codybontecou.com/programmatically-tweeting-with-nodejs.html#getting-authenticated","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":" on how to generate the proper authentication keys needed to access Twitter's API."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tweepy provides the helper function "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".OAuthHandler"}]},{"type":"text","value":" that requires you to pass it your "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"consumer key"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"consumer secret"}]},{"type":"text","value":" initializing the auth object, you then must call its method "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".set_access_token()"}]},{"type":"text","value":" which requires your "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"access token"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"access token secret"}]},{"type":"text","value":" given to you when creating your developer account and "},{"type":"element","tag":"a","props":{"href":"https://codybontecou.com/programmatically-tweeting-with-nodejs.html#getting-authenticated","rel":["nofollow"]},"children":[{"type":"text","value":"generating your app"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":["language-python"],"code":"import tweepy\n\nauth = tweepy.OAuthHandler(os.getenv(\"consumer_key\"), os.getenv(\"consumer_secret\"))\nauth.set_access_token(os.getenv(\"access_token\"), os.getenv(\"access_token_secret\"))\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import tweepy\n\nauth = tweepy.OAuthHandler(os.getenv(\"consumer_key\"), os.getenv(\"consumer_secret\"))\nauth.set_access_token(os.getenv(\"access_token\"), os.getenv(\"access_token_secret\"))\n"}]}]},{"type":"element","tag":"h2","props":{"id":"initializing-tweepys-api-and-client-objects"},"children":[{"type":"text","value":"Initializing Tweepy's API and Client objects"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can now utilize our auth variable to create "},{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/stable/api.html?highlight=API#API","rel":["nofollow"]},"children":[{"type":"text","value":"API"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/client.html","rel":["nofollow"]},"children":[{"type":"text","value":"Client"}]},{"type":"text","value":" objects using the following code:"}]},{"type":"element","tag":"pre","props":{"className":["language-python"],"code":"api = tweepy.API(auth)\nclient = tweepy.Client(\n    bearer_token=os.getenv(\"bearer_token\"),\n    consumer_key=os.getenv(\"consumer_key\"),\n    consumer_secret=os.getenv(\"consumer_secret\"),\n    access_token=os.getenv(\"access_token\"),\n    access_token_secret=os.getenv(\"access_token_secret\"),\n    wait_on_rate_limit=True,\n)\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"api = tweepy.API(auth)\nclient = tweepy.Client(\n    bearer_token=os.getenv(\"bearer_token\"),\n    consumer_key=os.getenv(\"consumer_key\"),\n    consumer_secret=os.getenv(\"consumer_secret\"),\n    access_token=os.getenv(\"access_token\"),\n    access_token_secret=os.getenv(\"access_token_secret\"),\n    wait_on_rate_limit=True,\n)\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With these objects, we can now access every Twitter endpoint."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-list-using-tweepys-api"},"children":[{"type":"text","value":"Creating a List using Tweepy's API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tweepy methods used:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/api.html?highlight=create_list#tweepy.API.create_list","rel":["nofollow"]},"children":[{"type":"text","value":".create_list()"}]},{"type":"text","value":": Takes three parameters: name, mode, and description. Name and description are self-explanatory and mode can either be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"public\""}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"private\""}]},{"type":"text","value":" to define the visibility status of the List."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The response from a successfully List creation returns the List data. I will be using this list later on, so I decided to extract it's id into the variable "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"list_id"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":["language-python"],"code":"list_name = \"Paul Grahams's Feed\"\nlist_description = \"A list of everyone Paul Graham follows\"\n\ntwitter_list = api.create_list(name=list_name, description=list_description)\nlist_id = twitter_list._json[\"id\"]\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"list_name = \"Paul Grahams's Feed\"\nlist_description = \"A list of everyone Paul Graham follows\"\n\ntwitter_list = api.create_list(name=list_name, description=list_description)\nlist_id = twitter_list._json[\"id\"]\n"}]}]},{"type":"element","tag":"h2","props":{"id":"getting-a-user-and-the-accounts-they-follow"},"children":[{"type":"text","value":"Getting a User and the accounts they follow"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tweepy methods used:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/v3.10.0/api.html?highlight=get_user#API.get_user","rel":["nofollow"]},"children":[{"type":"text","value":".get_user()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/client.html?highlight=get_users_following#tweepy.client.get_users_following","rel":["nofollow"]},"children":[{"type":"text","value":".get_users_following()"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By passing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client.get_user()"}]},{"type":"text","value":" a twitter handle - in this case, Paul Graham - I can get all of the public data Twitter provides regarding that user."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I then use that user's data with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"client.get_users_following()"}]},{"type":"text","value":" alongside max_results. The argument "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"max_results"}]},{"type":"text","value":" defines how many user objects Twitter will pass back. In this case, I used the max of 1000. The default is 100."}]},{"type":"element","tag":"pre","props":{"className":["language-python"],"code":"twitter_handle = \"paulg\"\nuser = client.get_user(username=twitter_handle)\n\nfollowers = client.get_users_following(id=user.data.id, max_results=1000)\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"twitter_handle = \"paulg\"\nuser = client.get_user(username=twitter_handle)\n\nfollowers = client.get_users_following(id=user.data.id, max_results=1000)\n"}]}]},{"type":"element","tag":"h2","props":{"id":"automatially-adding-users-to-the-list"},"children":[{"type":"text","value":"Automatially adding users to the list"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tweepy methods used:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.tweepy.org/en/latest/api.html?highlight=add_list_members#tweepy.api.add_list_members","rel":["nofollow"]},"children":[{"type":"text","value":".add_list_members"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we have the List we want to populate and the followers we want populate it with, we use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"api.add_list_members()"}]},{"type":"text","value":" method."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This method takes a list of up to 100 Twitter User ID's. The code snippet below chunks out follower data into sections of 100 Users and generates a list of ids to pass."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are also passing this method the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"list_id"}]},{"type":"text","value":" that was saved when we created the list."}]},{"type":"element","tag":"pre","props":{"className":["language-python"],"code":"for i in range(0, len(followers.data), 100):\n    ids = [follower[\"id\"] for follower in followers.data[i : i + 100]]\n    api.add_list_members(list_id=list_id, user_id=ids)\n","language":"python","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"for i in range(0, len(followers.data), 100):\n    ids = [follower[\"id\"] for follower in followers.data[i : i + 100]]\n    api.add_list_members(list_id=list_id, user_id=ids)\n"}]}]},{"type":"element","tag":"h2","props":{"id":"things-to-keep-in-mind-when-working-with-twitters-api"},"children":[{"type":"text","value":"Things to keep in mind when working with Twitter's API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Twitter rate limits just about all of their endpoints. "},{"type":"element","tag":"a","props":{"href":"https://developer.twitter.com/en/docs/twitter-api/v1/rate-limits","rel":["nofollow"]},"children":[{"type":"text","value":"Here"}]},{"type":"text","value":" is Twitter's documentation on what the rate limits are. Keep this is mind when developing Twitter-based applications because you may find yourself with an odd error."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thank you for reading! I hope you enjoyed it."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"twitter-lists-are-a-great-way-to-create-custom-feeds","depth":2,"text":"Twitter Lists are a great way to create custom feeds"},{"id":"using-tweepy-to-automatically-generate-our-twitter-lists","depth":2,"text":"Using Tweepy to automatically generate our Twitter Lists"},{"id":"authenticating-with-twitters-api-using-tweepy","depth":2,"text":"Authenticating with Twitter's API using Tweepy"},{"id":"initializing-tweepys-api-and-client-objects","depth":2,"text":"Initializing Tweepy's API and Client objects"},{"id":"creating-a-list-using-tweepys-api","depth":2,"text":"Creating a List using Tweepy's API"},{"id":"getting-a-user-and-the-accounts-they-follow","depth":2,"text":"Getting a User and the accounts they follow"},{"id":"automatially-adding-users-to-the-list","depth":2,"text":"Automatially adding users to the list"},{"id":"things-to-keep-in-mind-when-working-with-twitters-api","depth":2,"text":"Things to keep in mind when working with Twitter's API"}]}},"_type":"markdown","_id":"content:generate-twitter-lists-with-python.md","_source":"content","_file":"generate-twitter-lists-with-python.md","_stem":"generate-twitter-lists-with-python","_extension":"md"}]