{"_path":"/integrating-nuxt-bridge-with-nuxt2","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Integrating Nuxt Bridge into a Nuxt 2 Project","description":null,"type":"post","author":{"name":"Cody Bontecou","image":"https://codybontecou.com/images/cody-abstract.jpeg"},"date":"2022-05-04T00:00:00.000Z","category":"tutorials","dropdown":"NuxtJS","topics":["Vue","Vite","Nuxt"],"meta":[{"name":"og:title","content":"Integrating Nuxt Bridge into a Nuxt 2 Project"},{"name":"og:description","content":null},{"name":"og:image","content":"https://codybontecou.com/images/nuxt2-and-nuxt-bridge.png"},{"name":"og:image:alt","content":"Integrating Nuxt Bridge into a Nuxt 2 Project"},{"name":"og:title","content":"Integrating Nuxt Bridge into a Nuxt 2 Project"},{"name":"twitter:title","content":"Integrating Nuxt Bridge into a Nuxt 2 Project"},{"name":"twitter:text:title","content":"Integrating Nuxt Bridge into a Nuxt 2 Project"}],"canonicalUrl":"https://codybontecou.com/integrating-nuxt-bridge-with-nuxt2.html","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"integrating-nuxt-bridge-into-a-nuxt-2-project"},"children":[{"type":"text","value":"Integrating Nuxt Bridge into a Nuxt 2 Project"}]},{"type":"element","tag":"h2","props":{"id":"motivation"},"children":[{"type":"text","value":"Motivation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt-Bridge brings (bridges) a lot of the features Nuxt 3 has to offer to Nuxt 2 projects.\nFeatures such as:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vue 3 and the Composition API"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vite"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Built-in Typescript support"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Nitro Engine which gives us enhanced performance and serverless support."}]}]},{"type":"element","tag":"h2","props":{"id":"pain"},"children":[{"type":"text","value":"Pain"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The biggest pain point is dealing with modules that have not been updated to work with post-Nuxt 2."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is motivating me to focus further on separation of concern. This migration would be much easier if my code was less dependent on the framework and modules provided."}]},{"type":"element","tag":"h2","props":{"id":"migration-steps"},"children":[{"type":"text","value":"Migration Steps"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I followed the "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/bridge/overview/","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt Bridge"}]},{"type":"text","value":" documentation. The maintainers of the documentation did a great job of walking me through the process of migrating my project."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's the gist of the migration process:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Replace nuxt with nuxt-edge"}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light","code":"yarn remove nuxt\nyarn add nuxt-edge@latest\nyarn add --dev @nuxt/bridge@npm:@nuxt/bridge-edge\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" remove"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" nuxt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" nuxt-edge@latest\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5"},"children":[{"type":"text","value":" --dev"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" @nuxt/bridge@npm:@nuxt/bridge-edge\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Update package.json scripts. Replace all "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt"}]},{"type":"text","value":" scripts to use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxi"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-light","code":"//package.json\n{\n  \"scripts\": {\n    \"dev\": \"nuxi dev\",\n    \"build\": \"nuxi build\", // build + start if using ssr\n    \"start\": \"nuxi preview\"\n    \"generate\": \"nuxi generate\" // If statically generating site (ssg)\n  }\n}\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"//package.json\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"  \"scripts\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"    \"dev\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"\"nuxi dev\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"    \"build\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"\"nuxi build\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// build + start if using ssr\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"    \"start\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"\"nuxi preview\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"    \"generate\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":"\"nuxi generate\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":" // If statically generating site (ssg)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Update nuxt.config by wrapping the previous config in the function "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-light","code":"// nuxt.config.js\nimport { defineNuxtConfig } from '@nuxt/bridge'\n\nexport default defineNuxtConfig({\n  // Your existing configuration\n})\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// nuxt.config.js\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":" { defineNuxtConfig } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62"},"children":[{"type":"text","value":" '@nuxt/bridge'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Your existing configuration\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E"},"children":[{"type":"text","value":"})\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Replace or remove modules that are not compatible with non-Nuxt 2 or are now obsolete due to their features now being built in. You can search Nuxt's handy "},{"type":"element","tag":"a","props":{"href":"https://modules.nuxtjs.org/","rel":["nofollow"]},"children":[{"type":"text","value":"module site"}]},{"type":"text","value":" to see what versions of Nuxt the module you are interested in supports.\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If your module is no longer supported, you will have to delete it and create a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/plugins/","rel":["nofollow"]},"children":[{"type":"text","value":"plugin"}]},{"type":"text","value":" to bring in the functionality of the module/package that you depend on."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The migration documentation goes deeper into special cases. If what I mentioned doesn't fully migrate your project, dig into their documentation for a better understanding of what you need to do."}]},{"type":"element","tag":"h2","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I have to admit that the modules made the migration painful and make me question using them in the future. This experience has taught me to be more mindful of what dependencies I use, and how these dependencies are implemented."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While integrating already made Nuxt modules is easy, it reduces flexibility and forces reliance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Outside of module complexity, the migration went quick and smoothly. I look forward to having the benefits of Nuxt Bridge within my Nuxt 2 apps."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"motivation","depth":2,"text":"Motivation"},{"id":"pain","depth":2,"text":"Pain"},{"id":"migration-steps","depth":2,"text":"Migration Steps"},{"id":"conclusion","depth":2,"text":"Conclusion"}]}},"_type":"markdown","_id":"content:integrating-nuxt-bridge-with-nuxt2.md","_source":"content","_file":"integrating-nuxt-bridge-with-nuxt2.md","_stem":"integrating-nuxt-bridge-with-nuxt2","_extension":"md"}